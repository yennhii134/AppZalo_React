{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { createContext, useContext, useState, useEffect } from \"react\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { encode as base64Encode, decode as base64Decode } from \"base-64\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar ENCRYPTION_KEY = \"CongNgheMoi\";\nvar AuthContext = createContext();\nexport var useAuthContext = function useAuthContext() {\n  return useContext(AuthContext);\n};\nexport var AuthContextProvider = function AuthContextProvider(_ref) {\n  var children = _ref.children;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    authUser = _useState2[0],\n    setAuthUser = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    accessToken = _useState4[0],\n    setAccessToken = _useState4[1];\n  var _useState5 = useState(null),\n    _useState6 = _slicedToArray(_useState5, 2),\n    refreshToken = _useState6[0],\n    setRefreshToken = _useState6[1];\n  useEffect(function () {\n    var loadData = function () {\n      var _ref2 = _asyncToGenerator(function* () {\n        try {\n          var encryptedAuthUser = yield AsyncStorage.getItem(\"authUser\");\n          var encryptedAccessToken = yield AsyncStorage.getItem(\"accessToken\");\n          var encryptedRefreshToken = yield AsyncStorage.getItem(\"refreshToken\");\n          if (encryptedAuthUser) {\n            var decryptedAuthUser = base64Decode(encryptedAuthUser);\n            setAuthUser(JSON.parse(decryptedAuthUser));\n          }\n          if (encryptedAccessToken) {\n            var decryptedAccessToken = base64Decode(encryptedAccessToken);\n            setAccessToken(decryptedAccessToken);\n          }\n          if (encryptedRefreshToken) {\n            var decryptedRefreshToken = base64Decode(encryptedRefreshToken);\n            setRefreshToken(decryptedRefreshToken);\n          }\n        } catch (error) {\n          console.error(\"Error loading data from AsyncStorage:\", error);\n        }\n      });\n      return function loadData() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    loadData();\n  }, []);\n  useEffect(function () {\n    var saveData = function () {\n      var _ref3 = _asyncToGenerator(function* () {\n        try {\n          if (authUser) {\n            var encryptedAuthUser = base64Encode(JSON.stringify(authUser));\n            yield AsyncStorage.setItem(\"authUser\", encryptedAuthUser);\n          } else {\n            yield AsyncStorage.removeItem(\"authUser\");\n          }\n          if (accessToken) {\n            var encryptedAccessToken = base64Encode(accessToken);\n            yield AsyncStorage.setItem(\"accessToken\", encryptedAccessToken);\n          } else {\n            yield AsyncStorage.removeItem(\"accessToken\");\n          }\n          if (refreshToken) {\n            var encryptedRefreshToken = base64Encode(refreshToken);\n            yield AsyncStorage.setItem(\"refreshToken\", encryptedRefreshToken);\n          } else {\n            yield AsyncStorage.removeItem(\"refreshToken\");\n          }\n        } catch (error) {\n          console.error(\"Error saving data to AsyncStorage:\", error);\n        }\n      });\n      return function saveData() {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n    saveData();\n  }, [authUser]);\n  return _jsx(AuthContext.Provider, {\n    value: {\n      authUser: authUser,\n      setAuthUser: setAuthUser,\n      accessToken: accessToken,\n      setAccessToken: setAccessToken,\n      refreshToken: refreshToken,\n      setRefreshToken: setRefreshToken\n    },\n    children: children\n  });\n};\nexport default AuthContextProvider;","map":{"version":3,"names":["createContext","useContext","useState","useEffect","AsyncStorage","encode","base64Encode","decode","base64Decode","jsx","_jsx","ENCRYPTION_KEY","AuthContext","useAuthContext","AuthContextProvider","_ref","children","_useState","_useState2","_slicedToArray","authUser","setAuthUser","_useState3","_useState4","accessToken","setAccessToken","_useState5","_useState6","refreshToken","setRefreshToken","loadData","_ref2","_asyncToGenerator","encryptedAuthUser","getItem","encryptedAccessToken","encryptedRefreshToken","decryptedAuthUser","JSON","parse","decryptedAccessToken","decryptedRefreshToken","error","console","apply","arguments","saveData","_ref3","stringify","setItem","removeItem","Provider","value"],"sources":["D:/NodeJS/ZaloFake/Frontend/Mobile/zalofake/src/contexts/AuthContext.js"],"sourcesContent":["import { createContext, useContext, useState, useEffect } from \"react\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { encode as base64Encode, decode as base64Decode } from \"base-64\"; // Import thư viện mã hóa base64\r\n\r\nconst ENCRYPTION_KEY = \"CongNgheMoi\"; // Khóa bí mật, thay bằng khóa thực tế của bạn\r\n\r\nconst AuthContext = createContext();\r\n\r\nexport const useAuthContext = () => {\r\n  return useContext(AuthContext);\r\n};\r\n\r\nexport const AuthContextProvider = ({ children }) => {\r\n  const [authUser, setAuthUser] = useState(null);\r\n  const [accessToken, setAccessToken] = useState(null);\r\n  const [refreshToken, setRefreshToken] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const loadData = async () => {\r\n      try {\r\n        const encryptedAuthUser = await AsyncStorage.getItem(\"authUser\");\r\n        const encryptedAccessToken = await AsyncStorage.getItem(\"accessToken\");\r\n        const encryptedRefreshToken = await AsyncStorage.getItem(\r\n          \"refreshToken\"\r\n        );\r\n\r\n        if (encryptedAuthUser) {\r\n          const decryptedAuthUser = base64Decode(encryptedAuthUser); // Giải mã base64\r\n          setAuthUser(JSON.parse(decryptedAuthUser));\r\n        }\r\n        if (encryptedAccessToken) {\r\n          const decryptedAccessToken = base64Decode(encryptedAccessToken);\r\n          setAccessToken(decryptedAccessToken);\r\n        }\r\n        if (encryptedRefreshToken) {\r\n          const decryptedRefreshToken = base64Decode(encryptedRefreshToken);\r\n          setRefreshToken(decryptedRefreshToken);\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error loading data from AsyncStorage:\", error);\r\n      }\r\n    };\r\n\r\n    loadData();\r\n  }, []);\r\n  useEffect(() => {\r\n    const saveData = async () => {\r\n      try {\r\n        if (authUser) {\r\n          const encryptedAuthUser = base64Encode(JSON.stringify(authUser)); // Mã hóa base64\r\n          await AsyncStorage.setItem(\"authUser\", encryptedAuthUser);\r\n        } else {\r\n          await AsyncStorage.removeItem(\"authUser\");\r\n        }\r\n        if (accessToken) {\r\n          const encryptedAccessToken = base64Encode(accessToken);\r\n          await AsyncStorage.setItem(\"accessToken\", encryptedAccessToken);\r\n        } else {\r\n          await AsyncStorage.removeItem(\"accessToken\");\r\n        }\r\n        if (refreshToken) {\r\n          const encryptedRefreshToken = base64Encode(refreshToken);\r\n          await AsyncStorage.setItem(\"refreshToken\", encryptedRefreshToken);\r\n        } else {\r\n          await AsyncStorage.removeItem(\"refreshToken\");\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error saving data to AsyncStorage:\", error);\r\n      }\r\n    };\r\n\r\n    saveData();\r\n  }, [authUser]);\r\n\r\n  return (\r\n    <AuthContext.Provider\r\n      value={{\r\n        authUser,\r\n        setAuthUser,\r\n        accessToken,\r\n        setAccessToken,\r\n        refreshToken,\r\n        setRefreshToken,\r\n      }}\r\n    >\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport default AuthContextProvider;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}