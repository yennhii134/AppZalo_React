{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nvar _jsxFileName = \"D:\\\\HK2_Nam4\\\\CNM\\\\BTL\\\\New_3\\\\AppZalo_CNM\\\\Frontend\\\\Mobile\\\\zalofake\\\\src\\\\components\\\\ChatComponents\\\\Message\\\\Message.js\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport React, { useEffect, useState, useRef } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Linking from \"react-native-web/dist/exports/Linking\";\nimport { Video } from 'expo-av';\nimport { Ionicons } from \"@expo/vector-icons\";\nimport axiosInstance from \"../../../api/axiosInstance\";\nimport useMessage from '../../../hooks/useMessage';\nimport * as ImagePicker from \"expo-image-picker\";\nimport { FontAwesome5 } from \"@expo/vector-icons\";\nimport { useSocketContext } from \"../../../contexts/SocketContext\";\nimport useGroup from \"../../../hooks/useGroup\";\nimport { useAuthContext } from \"../../../contexts/AuthContext\";\nimport * as DocumentPicker from 'expo-document-picker';\nimport useConversation from \"../../../hooks/useConversation\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { setIsGroup } from \"../../../redux/stateCreateGroupSlice\";\nimport avatarGroup from '../../../../assets/avatarGroup.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Message = ({\n  navigation,\n  route\n}) => {\n  const {\n    chatItem\n  } = route.params;\n  const [conver, setConver] = useState(chatItem);\n  const {\n    getGroups,\n    getUserById\n  } = useGroup();\n  const {\n    authUser\n  } = useAuthContext();\n  const [textMessage, setTextMessage] = useState(null);\n  const [isColorSend, setIsColorSend] = useState(false);\n  const {\n    isNewSocket,\n    newSocketData,\n    setNewSocketData\n  } = useSocketContext();\n  const {\n    getConversationByID\n  } = useConversation();\n  const dispatch = useDispatch();\n  var isGroupRedux = useSelector(state => state.isGroup.isGroup);\n  const [modalImage, setModalImage] = useState(false);\n  const [chats, setChats] = useState([]);\n  const scrollViewRef = useRef();\n  const [contentHeight, setContentHeight] = useState(0);\n  const [scrollViewHeight, setScrollViewHeight] = useState(0);\n  const [isLoad, setIsLoad] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const {\n    renderMessageContent,\n    renderMessageContentReply,\n    showToastSuccess,\n    showToastError,\n    handleGetTimeInMessage,\n    addMessage,\n    sendMessage\n  } = useMessage();\n  const [isModalVisible, setModalVisible] = useState(false);\n  const [messageSelected, setMessageSelected] = useState(\"\");\n  const [isModalFriendVisible, setIsModalFriendVisible] = useState(false);\n  const [friends, setFriends] = useState([]);\n  const [isLoadMess, setIsLoadMess] = useState(false);\n  const [isLoadChuyenTiep, setIsLoadChuyenTiep] = useState(false);\n  const [isLoadThuHoi, setIsLoadThuHoi] = useState(false);\n  const [isLoadXoa, setIsLoadXoa] = useState(false);\n  const [replyChat, setReplyChat] = useState(null);\n  const [avatarGr] = useState(avatarGroup);\n  useEffect(() => {\n    navigation.setOptions({\n      headerRight: () => _jsxDEV(View, {\n        style: {\n          flexDirection: \"row\"\n        },\n        children: [_jsxDEV(Pressable, {\n          onPress: () => console.log(\"Pressed call\"),\n          children: _jsxDEV(Ionicons, {\n            name: \"call-outline\",\n            size: 27,\n            color: \"white\",\n            style: {\n              padding: 4,\n              paddingStart: 10\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this), _jsxDEV(Ionicons, {\n          name: \"videocam-outline\",\n          size: 27,\n          color: \"white\",\n          style: {\n            padding: 4,\n            marginRight: 10\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this), _jsxDEV(Pressable, {\n          onPress: () => navigation.navigate(\"MessageSettings\", {\n            item: conver\n          }),\n          children: _jsxDEV(Ionicons, {\n            name: \"list-outline\",\n            size: 27,\n            color: \"white\",\n            style: {\n              padding: 4\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this),\n      headerTitle: () => _jsxDEV(View, {\n        style: {\n          flexDirection: \"row\",\n          alignItems: \"center\",\n          width: '55%',\n          marginRight: 200\n        },\n        children: [conver.tag === 'group' && _jsxDEV(View, {\n          style: {\n            width: '30%'\n          },\n          children: _jsxDEV(Image, {\n            source: conver.avatar === \"https://res.cloudinary.com/dq3pxd9eq/image/upload/v1715763881/Zalo_Fake_App/qhncxk41jtp39iknujyz.png\" ? avatarGr : {\n              uri: conver.avatar\n            },\n            style: {\n              width: 45,\n              height: 40,\n              borderRadius: 25\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 13\n        }, this), _jsxDEV(Text, {\n          style: {\n            fontSize: 19,\n            color: \"white\",\n            fontWeight: 'bold'\n          },\n          children: conver.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this),\n      headerStyle: {\n        backgroundColor: \"#0091FF\",\n        shadowColor: \"#fff\"\n      },\n      headerTintColor: \"#fff\",\n      headerTitleStyle: {\n        fontWeight: \"bold\",\n        fontSize: 20\n      }\n    });\n  }, [navigation, isGroupRedux]);\n  const toggleModal = () => {\n    setModalVisible(!isModalVisible);\n  };\n  const toggleModalFriend = () => {\n    setIsModalFriendVisible(!isModalFriendVisible);\n  };\n  const fetchConversation = async () => {\n    if (chatItem.conversation !== null) {\n      const fetchConver = await getConversationByID(chatItem.conversation?._id);\n      setConver(_objectSpread(_objectSpread({}, conver), {}, {\n        participants: fetchConver.participants,\n        messages: fetchConver.messages\n      }));\n    }\n  };\n  useEffect(() => {\n    fetchConversation();\n  }, [isGroupRedux]);\n  useEffect(() => {\n    if (isLoad === true) {\n      scrollToEnd();\n    }\n  }, [isLoad]);\n  useEffect(() => {\n    if (conver && conver.messages) {\n      fetchChats();\n    }\n  }, [conver]);\n  const fetchChats = async () => {\n    try {\n      if (conver && conver.messages) {\n        const chatNew = await Promise.all(conver.messages.map(async message => {\n          let senderName;\n          let nameReply;\n          if (conver.participants.find(participant => participant._id === message.senderId)) {\n            senderName = conver.participants.find(participant => participant._id === message.senderId);\n          } else {\n            const getUser = await getUserById(message.senderId);\n            senderName = getUser.user;\n          }\n          if (message.replyMessageId !== null) {\n            if (conver.participants.find(participant => participant._id === message.replyMessageId.senderId)) {\n              nameReply = conver.participants.find(participant => participant._id === message.replyMessageId.senderId);\n            } else {\n              const getUser = await getUserById(message.replyMessageId.senderId);\n              nameReply = getUser.user;\n            }\n          }\n          return {\n            chat: message,\n            sender: senderName,\n            nameReply: nameReply?.profile.name || null\n          };\n        }));\n        setChats(chatNew);\n        setIsLoad(true);\n        fetchFriends();\n      }\n    } catch (error) {\n      console.log(error);\n      return false;\n    }\n  };\n  const fetchFriends = async () => {\n    let data = [];\n    try {\n      const response = await axiosInstance.get('/users/get/friends');\n      const newFriend = await Promise.all(response.data.friends.map(async friend => {\n        return {\n          _id: friend.userId,\n          name: friend.profile.name,\n          avatar: friend.profile.avatar.url || \"https://fptshop.com.vn/Uploads/Originals/2021/6/23/637600835869525914_thumb_750x500.png\",\n          tag: 'friend'\n        };\n      }));\n      data.push(...newFriend);\n    } catch (error) {\n      console.log(\"FetchGroupError: \", error);\n    }\n    try {\n      const allGr = await getGroups();\n      const newGroup = await Promise.all(allGr.map(async group => {\n        return {\n          _id: group._id,\n          name: group.groupName,\n          avatar: group.avatar.url,\n          tag: group.conversation.tag\n        };\n      }));\n      data.push(...newGroup);\n    } catch (error) {\n      console.log(\"FetchGroupError: \", error);\n    }\n    setFriends(data);\n  };\n  const scrollToEnd = () => {\n    if (scrollViewRef.current) {\n      scrollViewRef.current.scrollToEnd({\n        animated: true\n      });\n    }\n  };\n  useEffect(() => {\n    const fetchSocket = async () => {\n      if (isNewSocket === \"new_message\") {\n        const message = newSocketData;\n        if (message && message.retrunMessage) {\n          if (message.conversationId === conver.conversation._id && message.retrunMessage.receiverId === authUser._id && message.retrunMessage.senderId !== authUser._id) {\n            setChat(message.retrunMessage);\n            scrollToEnd();\n          }\n        }\n      }\n      if (isNewSocket === \"delete_message\") {\n        console.log(\"delete\");\n        const {\n          conversationId,\n          isDeleted\n        } = newSocketData;\n        console.log((\"conversationId\", conversationId));\n        console.log(\"isDeleted\", isDeleted);\n        if (isDeleted && conver && conver.conversation._id === conversationId) {\n          setChats([]);\n        } else {\n          if (conver && conver.conversation._id === conversationId) {\n            fetchConversation();\n            console.log(\"socket delete messagae\");\n          }\n        }\n      }\n      if (isNewSocket === \"remove-from-group\") {\n        const group = newSocketData;\n        if (group && group.removeMembers) {\n          if (group.removeMembers.includes(authUser._id)) {\n            navigation.navigate(\"ChatComponent\");\n            setNewSocketData(null);\n          }\n        }\n      }\n      if (isNewSocket === \"delete-group\") {\n        const group = newSocketData;\n        if (group && group.id === conver._id) {\n          navigation.navigate(\"ChatComponent\");\n          setNewSocketData(null);\n        }\n      }\n      if (isNewSocket === \"update-group\") {\n        const group = newSocketData;\n        if (group && group.id === conver._id) {\n          setConver(preConver => _objectSpread(_objectSpread({}, preConver), {}, {\n            name: group.name,\n            avatar: group.avatar\n          }));\n          dispatch(setIsGroup());\n        }\n      }\n    };\n    fetchSocket();\n  }, [isNewSocket, newSocketData]);\n  const handlePressIn = message => {\n    setMessageSelected(message);\n    setModalVisible(true);\n  };\n  const removeItemById = (array, idToRemove) => {\n    const indexToRemove = array.findIndex(item => item._id === idToRemove);\n    if (indexToRemove !== -1) {\n      array.splice(indexToRemove, 1);\n    }\n    return array;\n  };\n  const handleDeleteMess = () => {\n    setIsLoadThuHoi(true);\n    handleDelete(`/chats/${messageSelected.chat._id}/delete`, \"Thu hồi thành công\");\n  };\n  const handleDeleteMessByStatus = () => {\n    setIsLoadXoa(true);\n    handleDelete(`conversations/deleteOnMySelf/${conver.conversation._id}/${messageSelected.chat._id}`, \"Xóa thành công\");\n  };\n  const handleDelete = async (api, toast) => {\n    try {\n      const response = await axiosInstance.post(api);\n      if (response.status === 200) {\n        fetchConversation();\n        showToastSuccess(toast);\n        setIsLoadXoa(false);\n        setIsLoadThuHoi(false);\n        toggleModal();\n      }\n    } catch (error) {\n      console.log(error);\n      setIsLoadThuHoi(false);\n      setIsLoadThuHoi(false);\n      toggleModal();\n    }\n  };\n  const handleGetModalFriend = () => {\n    toggleModal();\n    toggleModalFriend();\n  };\n  const chuyenTiepChat = friend => {\n    setIsLoadChuyenTiep(true);\n    const handleSendMessage = async () => {\n      try {\n        const messagae = {\n          data: messageSelected.chat.contents[0],\n          replyMessageId: replyChat !== null ? replyChat.chat._id : null,\n          isGroup: friend.tag === \"group\" ? true : false\n        };\n        const send = await sendMessage(friend._id, messagae, 'sendText');\n        if (send) {\n          showToastSuccess(\"Chuyển tiếp thành công\");\n          setIsLoadChuyenTiep(false);\n        } else {\n          showToastError(\"Chuyển tiếp thất bại\");\n        }\n      } catch (error) {\n        console.log(\"error1:\", error);\n        setIsLoadChuyenTiep(false);\n        return false;\n      }\n      toggleModalFriend();\n    };\n    handleSendMessage();\n  };\n  const appendData = (formData, asset) => {\n    const fileName = asset.uri.split('/').pop();\n    let type = null;\n    if (asset?.type === 'image') {\n      type = 'image/jpeg';\n    } else if (asset?.type === 'video') {\n      type = 'video/mp4';\n    } else if (asset?.mimeType === 'application/pdf') {\n      type = 'file/pdf';\n    }\n    formData.append('data[]', {\n      uri: asset.uri,\n      name: fileName,\n      type: type\n    });\n  };\n  const appendIs = (formData, tag) => {\n    formData.append('isGroup', tag === 'group' ? true : false);\n    formData.append('replyMessageId', replyChat !== null ? replyChat.chat._id : null);\n  };\n  const setChat = async dataChat => {\n    let nameReply = null;\n    let senderName = authUser;\n    if (dataChat.replyMessageId) {\n      nameReply = conver.participants.find(participant => participant._id === dataChat.replyMessageId.senderId);\n      if (!nameReply) {\n        const getUser = await getUserById(dataChat.replyMessageId.senderId);\n        nameReply = getUser.user;\n      }\n    }\n    if (dataChat.senderId !== authUser._id) {\n      senderName = conver.participants.find(sender => sender._id === dataChat.senderId);\n    }\n    setChats(prevChats => [...prevChats, {\n      chat: dataChat,\n      sender: senderName,\n      nameReply: nameReply?.profile?.name\n    }]);\n  };\n  const send = async (user, formData, typeSend) => {\n    setIsLoadMess(true);\n    try {\n      const response = await sendMessage(user, formData, typeSend);\n      if (response && response.status === 201) {\n        console.log(`${typeSend} success`);\n        setChat(response.data.data.message);\n        setReplyChat(null);\n        setIsLoadMess(false);\n        dispatch(setIsGroup());\n        scrollToEnd();\n      } else {\n        console.log(`${typeSend} fail`);\n        setIsLoadMess(false);\n      }\n    } catch (error) {\n      console.log(`Send ${typeSend} error:`, error);\n      setIsLoadMess(false);\n    }\n  };\n  const pickFile = async () => {\n    try {\n      const file = await DocumentPicker.getDocumentAsync();\n      if (file.canceled === false) {\n        handleSendFile(file, 'sendFiles');\n      }\n    } catch (error) {\n      console.error('Error picking file:', error);\n    }\n  };\n  const openImagePicker = async () => {\n    const pickerResult = await ImagePicker.launchImageLibraryAsync({\n      mediaTypes: ImagePicker.MediaTypeOptions.All,\n      allowsEditing: false,\n      quality: 1,\n      allowsMultipleSelection: true,\n      selectionLimit: 20,\n      videoExportPreset: ImagePicker.VideoExportPreset.Passthrough,\n      videoMaxDuration: 10\n    });\n    if (!pickerResult.canceled) {\n      handleSendFile(pickerResult, 'sendImages');\n    }\n  };\n  const handleSendFile = async (file, typeSend) => {\n    const formData = new FormData();\n    const formDataVideo = new FormData();\n    let isVideo = false;\n    let is = false;\n    for (const asset of file.assets) {\n      if (asset.type === 'video') {\n        appendData(formDataVideo, asset);\n        isVideo = true;\n      } else {\n        appendData(formData, asset);\n        is = true;\n      }\n    }\n    if (is) {\n      appendIs(formData, conver.tag);\n      send(conver._id, formData, typeSend);\n    }\n    if (isVideo) {\n      appendIs(formDataVideo, conver.tag);\n      send(conver._id, formDataVideo, 'sendVideo');\n    }\n  };\n  useEffect(() => {\n    if (!textMessage) {\n      setIsColorSend(\"black\");\n    } else {\n      setIsColorSend(\"#0091FF\");\n    }\n  }, [textMessage]);\n  const handleSendMessage = async () => {\n    if (textMessage) {\n      send(conver._id, addMessage(textMessage, conver.tag, replyChat), 'sendText');\n      setTextMessage(null);\n    }\n  };\n  const handleCheckIsSend = message => {\n    if (authUser.profile.name === message.sender.profile.name) {\n      return true;\n    } else {\n      return false;\n    }\n  };\n  const handleCheckShow = message => {\n    if (message.sender._id === authUser._id) {\n      if (message.chat.status === 0 || message.chat.status === 2) {\n        return true;\n      } else {\n        return false;\n      }\n    } else {\n      if (message.chat.status === 0 || message.chat.status === 1) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n  };\n  const handleReplyChat = () => {\n    setReplyChat(messageSelected);\n    toggleModal();\n  };\n  const handleXemAnh = () => {\n    setModalImage(true);\n  };\n  const handleXemFile = async () => {\n    const url = messageSelected?.chat?.contents[0].data;\n    const supported = await Linking.canOpenURL(url);\n    if (supported) {\n      await Linking.openURL(url);\n    } else {\n      console.error(\"Don't know how to open URI: \" + url);\n    }\n  };\n  return _jsxDEV(View, {\n    style: {\n      flex: 1,\n      backgroundColor: \"#E5E9EB\"\n    },\n    children: [_jsxDEV(View, {\n      style: {\n        flex: 1,\n        justifyContent: \"center\"\n      },\n      children: [isLoading ? _jsxDEV(ActivityIndicator, {\n        color: \"blue\",\n        size: \"large\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 564,\n        columnNumber: 11\n      }, this) : _jsxDEV(View, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 566,\n        columnNumber: 11\n      }, this), _jsxDEV(ScrollView, {\n        ref: scrollViewRef,\n        children: _jsxDEV(View, {\n          style: {\n            flex: 1\n          },\n          children: chats.length > 0 ? chats.map((message, index) => _jsxDEV(View, {\n            children: handleCheckShow(message) && _jsxDEV(View, {\n              style: {\n                display: 'flex',\n                flexDirection: 'row',\n                alignItems: \"center\",\n                justifyContent: handleCheckIsSend(message) ? \"flex-end\" : \"flex-start\"\n              },\n              children: [handleCheckIsSend(message) ? _jsxDEV(View, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 578,\n                columnNumber: 28\n              }, this) : _jsxDEV(View, {\n                style: {\n                  width: 35,\n                  height: 35,\n                  justifyContent: \"center\",\n                  alignItems: \"center\",\n                  marginLeft: 10,\n                  marginRight: 10\n                },\n                children: _jsxDEV(Image, {\n                  source: {\n                    uri: message.sender.profile.avatar.url || \"https://fptshop.com.vn/Uploads/Originals/2021/6/23/637600835869525914_thumb_750x500.png\"\n                  },\n                  style: {\n                    width: 35,\n                    height: 35,\n                    borderRadius: 25\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 581,\n                  columnNumber: 29\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 579,\n                columnNumber: 28\n              }, this), _jsxDEV(View, {\n                style: [handleCheckIsSend(message) ? styles.styleSender : styles.styleRecive],\n                children: [_jsxDEV(Text, {\n                  style: {\n                    paddingHorizontal: 10,\n                    fontSize: 12,\n                    color: 'gray',\n                    fontWeight: '700'\n                  },\n                  children: message.sender.profile.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 589,\n                  columnNumber: 27\n                }, this), message.chat.replyMessageId === null ? _jsxDEV(View, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 592,\n                  columnNumber: 68\n                }, this) : _jsxDEV(View, {\n                  style: {\n                    backgroundColor: '#89D5FB',\n                    display: 'flex',\n                    marginLeft: 10,\n                    borderLeftWidth: 2,\n                    borderColor: '#0072AB',\n                    marginRight: 10\n                  },\n                  children: message.chat.replyMessageId.contents.map((content, i) => _jsxDEV(View, {\n                    style: {\n                      display: 'flex',\n                      paddingVertical: 10,\n                      alignItems: 'center'\n                    },\n                    children: content.type === 'text' ? _jsxDEV(View, {\n                      children: [_jsxDEV(Text, {\n                        style: {\n                          fontSize: 13,\n                          fontWeight: 'bold',\n                          paddingLeft: 15\n                        },\n                        children: message?.nameReply\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 599,\n                        columnNumber: 39\n                      }, this), renderMessageContentReply(content)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 598,\n                      columnNumber: 37\n                    }, this) : _jsxDEV(View, {\n                      style: {\n                        display: 'flex',\n                        paddingVertical: 5,\n                        alignItems: 'center',\n                        paddingRight: 5,\n                        flexDirection: 'row'\n                      },\n                      children: [renderMessageContentReply(content), _jsxDEV(View, {\n                        children: [_jsxDEV(Text, {\n                          style: {\n                            paddingLeft: 10,\n                            fontSize: 13,\n                            fontWeight: 'bold'\n                          },\n                          children: message?.nameReply\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 608,\n                          columnNumber: 41\n                        }, this), _jsxDEV(Text, {\n                          style: {\n                            paddingLeft: 10,\n                            fontSize: 13,\n                            color: '#000'\n                          },\n                          children: [\"[\", content.type === 'image' ? 'Hình ảnh' : content.type, \"]\"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 611,\n                          columnNumber: 41\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 607,\n                        columnNumber: 39\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 605,\n                      columnNumber: 37\n                    }, this)\n                  }, i, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 596,\n                    columnNumber: 33\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 593,\n                  columnNumber: 30\n                }, this), message.chat.contents.map((content, i) => _jsxDEV(Pressable, {\n                  onPress: () => handlePressIn(message),\n                  children: _jsxDEV(View, {\n                    children: [renderMessageContent(content), _jsxDEV(View, {\n                      style: {\n                        paddingLeft: 15,\n                        paddingRight: 15,\n                        paddingBottom: 5\n                      },\n                      children: _jsxDEV(Text, {\n                        style: {\n                          fontSize: 14\n                        },\n                        children: handleGetTimeInMessage(message.chat.timestamp)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 626,\n                        columnNumber: 103\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 626,\n                      columnNumber: 33\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 624,\n                    columnNumber: 31\n                  }, this)\n                }, i, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 622,\n                  columnNumber: 29\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 586,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 576,\n              columnNumber: 23\n            }, this)\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 573,\n            columnNumber: 17\n          }, this)) : _jsxDEV(View, {\n            children: _jsxDEV(Text, {\n              style: {\n                fontSize: 16,\n                fontWeight: '600',\n                textAlign: 'center',\n                paddingVertical: 10\n              },\n              children: \"Ch\\u01B0a c\\xF3 tin nh\\u1EAFn n\\xE0o!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 635,\n              columnNumber: 28\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 635,\n            columnNumber: 22\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 570,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 568,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 562,\n      columnNumber: 7\n    }, this), _jsxDEV(View, {\n      children: replyChat === null ? _jsxDEV(Text, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 642,\n        columnNumber: 12\n      }, this) : _jsxDEV(View, {\n        style: {\n          backgroundColor: 'white',\n          padding: 10\n        },\n        children: _jsxDEV(View, {\n          style: {\n            borderLeftWidth: 2,\n            marginLeft: 10\n          },\n          children: [_jsxDEV(View, {\n            style: {\n              display: 'flex',\n              flexDirection: 'row',\n              justifyContent: 'space-between'\n            },\n            children: [_jsxDEV(Text, {\n              style: {\n                paddingLeft: 15,\n                fontSize: 14,\n                color: '#000'\n              },\n              children: [\"Tr\\u1EA3 l\\u1EDDi: \", _jsxDEV(Text, {\n                style: {\n                  paddingLeft: 15,\n                  fontSize: 14,\n                  color: 'gray',\n                  fontWeight: 'bold'\n                },\n                children: [replyChat?.sender?.profile.name, \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 648,\n                columnNumber: 30\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 647,\n              columnNumber: 19\n            }, this), _jsxDEV(Pressable, {\n              onPress: () => {\n                setReplyChat(null);\n              },\n              style: {\n                marginRight: 20\n              },\n              children: _jsxDEV(Ionicons, {\n                name: \"close\",\n                size: 30,\n                color: \"gray\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 650,\n                columnNumber: 97\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 650,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 646,\n            columnNumber: 17\n          }, this), _jsxDEV(View, {\n            children: replyChat.chat.contents.map((content, i) => _jsxDEV(View, {\n              children: renderMessageContentReply(content)\n            }, i, false, {\n              fileName: _jsxFileName,\n              lineNumber: 654,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 652,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 645,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 644,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 640,\n      columnNumber: 7\n    }, this), _jsxDEV(View, {\n      style: {\n        flexDirection: \"row\",\n        justifyContent: \"space-around\",\n        alignItems: \"center\",\n        padding: 10,\n        backgroundColor: \"white\"\n      },\n      children: [_jsxDEV(Pressable, {\n        onPress: () => console.log(\"Pressed smiley\"),\n        children: _jsxDEV(Ionicons, {\n          name: \"happy-outline\",\n          size: 30,\n          color: \"black\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 672,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 671,\n        columnNumber: 9\n      }, this), _jsxDEV(View, {\n        style: {\n          width: '54%'\n        },\n        children: _jsxDEV(TextInput, {\n          value: textMessage,\n          onChangeText: setTextMessage,\n          style: {\n            flex: 1,\n            height: 40,\n            borderColor: \"gray\",\n            borderRadius: 5,\n            fontSize: 17\n          },\n          placeholder: \"Tin nh\\u1EAFn\",\n          placeholderTextColor: \"gray\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 676,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 675,\n        columnNumber: 9\n      }, this), _jsxDEV(View, {\n        style: {\n          flexDirection: 'row',\n          width: '35%',\n          justifyContent: 'space-between'\n        },\n        children: [_jsxDEV(TouchableOpacity, {\n          onPress: pickFile,\n          children: _jsxDEV(Ionicons, {\n            name: \"ellipsis-horizontal-outline\",\n            size: 30,\n            color: \"black\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 693,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 692,\n          columnNumber: 11\n        }, this), _jsxDEV(TouchableOpacity, {\n          onPress: () => console.log(\"Pressed microphone\"),\n          children: _jsxDEV(Ionicons, {\n            name: \"mic-outline\",\n            size: 30,\n            color: \"black\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 701,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 700,\n          columnNumber: 11\n        }, this), _jsxDEV(TouchableOpacity, {\n          onPress: openImagePicker,\n          children: _jsxDEV(Ionicons, {\n            name: \"image-outline\",\n            size: 30,\n            color: \"black\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 709,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 708,\n          columnNumber: 11\n        }, this), _jsxDEV(TouchableOpacity, {\n          onPress: handleSendMessage,\n          children: isLoadMess ? _jsxDEV(ActivityIndicator, {\n            color: \"black\",\n            size: \"large\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 714,\n            columnNumber: 15\n          }, this) : _jsxDEV(Ionicons, {\n            name: \"paper-plane\",\n            size: 30,\n            color: isColorSend\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 716,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 712,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 691,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 662,\n      columnNumber: 7\n    }, this), _jsxDEV(Modal, {\n      animationType: \"slide\",\n      transparent: true,\n      visible: isModalVisible,\n      onRequestClose: toggleModal,\n      children: _jsxDEV(View, {\n        style: styles.modalContainer,\n        children: _jsxDEV(View, {\n          style: styles.modalContent,\n          children: [_jsxDEV(Text, {\n            style: styles.modalHeaderText,\n            children: \"Choose\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 730,\n            columnNumber: 13\n          }, this), _jsxDEV(View, {\n            style: styles.modalButtonContainer1,\n            children: [_jsxDEV(Pressable, {\n              style: styles.pressCol,\n              onPress: handleGetModalFriend,\n              children: [_jsxDEV(FontAwesome5, {\n                name: \"share\",\n                size: 20,\n                color: \"black\",\n                style: {\n                  marginRight: 8\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 735,\n                columnNumber: 17\n              }, this), _jsxDEV(Text, {\n                style: styles.modalButton,\n                children: \"Chuy\\u1EC3n ti\\u1EBFp\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 741,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 734,\n              columnNumber: 15\n            }, this), _jsxDEV(Pressable, {\n              style: styles.pressCol,\n              onPress: handleDeleteMessByStatus,\n              children: [isLoadXoa ? _jsxDEV(ActivityIndicator, {\n                color: \"black\",\n                size: \"large\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 745,\n                columnNumber: 19\n              }, this) : _jsxDEV(FontAwesome5, {\n                name: \"trash\",\n                size: 20,\n                color: \"black\",\n                style: {\n                  marginRight: 8\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 747,\n                columnNumber: 19\n              }, this), _jsxDEV(Text, {\n                style: styles.modalButton,\n                children: \"X\\xF3a\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 754,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 743,\n              columnNumber: 15\n            }, this), messageSelected?.sender?.profile?.name === authUser.profile.name ? _jsxDEV(Pressable, {\n              style: styles.pressCol,\n              onPress: handleDeleteMess,\n              children: [isLoadThuHoi ? _jsxDEV(ActivityIndicator, {\n                color: \"black\",\n                size: \"large\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 761,\n                columnNumber: 25\n              }, this) : _jsxDEV(FontAwesome5, {\n                name: \"comment-slash\",\n                size: 20,\n                color: \"black\",\n                style: {\n                  marginRight: 8\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 763,\n                columnNumber: 25\n              }, this), _jsxDEV(Text, {\n                style: styles.modalButton,\n                children: \"Thu h\\u1ED3i\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 770,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 759,\n              columnNumber: 21\n            }, this) : _jsxDEV(Text, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 774,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 733,\n            columnNumber: 13\n          }, this), _jsxDEV(View, {\n            style: styles.modalButtonContainer1,\n            children: [_jsxDEV(Pressable, {\n              style: styles.pressCol,\n              children: [_jsxDEV(FontAwesome5, {\n                name: \"list\",\n                size: 20,\n                color: \"black\",\n                style: {\n                  margin: 'auto'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 779,\n                columnNumber: 17\n              }, this), _jsxDEV(Text, {\n                style: styles.modalButton,\n                children: \"Ch\\u1ECDn nhi\\u1EC1u\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 785,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 778,\n              columnNumber: 15\n            }, this), _jsxDEV(Pressable, {\n              style: styles.pressCol,\n              onPress: handleReplyChat,\n              children: [_jsxDEV(FontAwesome5, {\n                name: \"reply\",\n                size: 20,\n                color: \"black\",\n                style: {\n                  margin: 'auto'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 788,\n                columnNumber: 17\n              }, this), _jsxDEV(Text, {\n                style: styles.modalButton,\n                children: \"Tr\\u1EA3 l\\u1EDDi\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 794,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 787,\n              columnNumber: 15\n            }, this), messageSelected?.chat?.contents[0].type === 'image' && _jsxDEV(Pressable, {\n              style: styles.pressCol,\n              onPress: handleXemAnh,\n              children: [_jsxDEV(FontAwesome5, {\n                name: \"image\",\n                size: 25,\n                color: \"black\",\n                style: {\n                  margin: 'auto'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 800,\n                columnNumber: 21\n              }, this), _jsxDEV(Text, {\n                style: styles.modalButton,\n                children: \"Xem \\u1EA3nh\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 806,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 799,\n              columnNumber: 19\n            }, this), messageSelected?.chat?.contents[0].type === 'video' && _jsxDEV(Pressable, {\n              style: styles.pressCol,\n              onPress: handleXemAnh,\n              children: [_jsxDEV(FontAwesome5, {\n                name: \"video\",\n                size: 25,\n                color: \"black\",\n                style: {\n                  margin: 'auto'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 813,\n                columnNumber: 21\n              }, this), _jsxDEV(Text, {\n                style: styles.modalButton,\n                children: \"Xem video\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 819,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 812,\n              columnNumber: 19\n            }, this), messageSelected?.chat?.contents[0].type === 'file' && _jsxDEV(Pressable, {\n              style: styles.pressCol,\n              onPress: handleXemFile,\n              children: [_jsxDEV(FontAwesome5, {\n                name: \"list\",\n                size: 25,\n                color: \"black\",\n                style: {\n                  margin: 'auto'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 826,\n                columnNumber: 21\n              }, this), _jsxDEV(Text, {\n                style: styles.modalButton,\n                children: \"Xem file\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 832,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 825,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 777,\n            columnNumber: 13\n          }, this), _jsxDEV(View, {\n            style: styles.modalButtonContainer,\n            children: _jsxDEV(Pressable, {\n              onPress: toggleModal,\n              children: _jsxDEV(Text, {\n                style: styles.modalButton,\n                children: \"H\\u1EE6Y\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 839,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 838,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 837,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 729,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 728,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 722,\n      columnNumber: 7\n    }, this), _jsxDEV(Modal, {\n      animationType: \"slide\",\n      transparent: true,\n      visible: isModalFriendVisible,\n      onRequestClose: toggleModalFriend,\n      children: _jsxDEV(View, {\n        style: styles.modalContainer,\n        children: _jsxDEV(View, {\n          style: styles.modalContent,\n          children: [_jsxDEV(Text, {\n            style: styles.modalHeaderText,\n            children: \"Choose\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 855,\n            columnNumber: 13\n          }, this), _jsxDEV(View, {\n            style: styles.modalButtonContainer,\n            children: _jsxDEV(ScrollView, {\n              children: _jsxDEV(View, {\n                style: styles.friendList,\n                children: [_jsxDEV(View, {\n                  style: styles.friendListHeader,\n                  children: [_jsxDEV(Text, {\n                    style: styles.sectionTitle\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 862,\n                    columnNumber: 21\n                  }, this), isLoadChuyenTiep ? _jsxDEV(ActivityIndicator, {\n                    color: \"black\",\n                    size: \"large\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 864,\n                    columnNumber: 23\n                  }, this) : _jsxDEV(View, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 866,\n                    columnNumber: 23\n                  }, this), _jsxDEV(Pressable, {\n                    onPress: toggleModalFriend,\n                    children: _jsxDEV(Ionicons, {\n                      name: \"close\",\n                      size: 30,\n                      color: \"black\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 868,\n                      columnNumber: 62\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 868,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 861,\n                  columnNumber: 19\n                }, this), friends.map((friend, index) => _jsxDEV(View, {\n                  style: styles.friendRow,\n                  children: _jsxDEV(Pressable, {\n                    style: styles.friendItem,\n                    children: [_jsxDEV(View, {\n                      style: styles.friendInfo,\n                      children: [_jsxDEV(Image, {\n                        source: {\n                          uri: friend.avatar\n                        },\n                        style: styles.friendAvatar\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 874,\n                        columnNumber: 27\n                      }, this), _jsxDEV(Text, {\n                        style: styles.friendName,\n                        children: friend.name\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 880,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 873,\n                      columnNumber: 25\n                    }, this), _jsxDEV(View, {\n                      style: styles.friendActions,\n                      children: _jsxDEV(Pressable, {\n                        onPress: () => chuyenTiepChat(friend),\n                        style: styles.pressCol,\n                        children: _jsxDEV(FontAwesome5, {\n                          name: \"arrow-right\",\n                          size: 30,\n                          color: \"black\",\n                          style: {\n                            alignContent: \"center\",\n                            alignItems: \"center\"\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 884,\n                          columnNumber: 29\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 883,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 882,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 872,\n                    columnNumber: 23\n                  }, this)\n                }, index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 871,\n                  columnNumber: 21\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 860,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 859,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 858,\n            columnNumber: 13\n          }, this), _jsxDEV(View, {\n            style: styles.modalButtonContainer,\n            children: [_jsxDEV(Pressable, {\n              onPress: toggleModalFriend,\n              children: _jsxDEV(Text, {\n                style: styles.modalButton,\n                children: \"H\\u1EE6Y\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 900,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 899,\n              columnNumber: 15\n            }, this), _jsxDEV(Pressable, {\n              children: _jsxDEV(Text, {\n                style: styles.modalButton,\n                children: \"X\\xC1C NH\\u1EACN\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 903,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 902,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 898,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 854,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 853,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 847,\n      columnNumber: 7\n    }, this), _jsxDEV(Modal, {\n      visible: modalImage,\n      transparent: true,\n      onRequestClose: () => setModalImage(false),\n      children: _jsxDEV(View, {\n        style: styles.modalContainer,\n        children: [_jsxDEV(TouchableOpacity, {\n          style: {\n            paddingLeft: '80%'\n          },\n          onPress: () => {\n            setModalImage(false);\n            toggleModal();\n          },\n          children: _jsxDEV(View, {\n            children: _jsxDEV(FontAwesome5, {\n              name: \"times\",\n              size: 30,\n              color: \"black\",\n              style: {\n                alignContent: \"center\",\n                alignItems: \"center\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 922,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 921,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 917,\n          columnNumber: 11\n        }, this), messageSelected?.chat?.contents[0].type === 'image' ? _jsxDEV(Image, {\n          source: {\n            uri: messageSelected?.chat?.contents[0].data\n          },\n          style: {\n            width: '90%',\n            height: null,\n            aspectRatio: 1,\n            borderRadius: 10\n          },\n          resizeMode: \"contain\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 930,\n          columnNumber: 67\n        }, this) : _jsxDEV(Video, {\n          source: {\n            uri: messageSelected?.chat?.contents[0].data\n          },\n          useNativeControls: true,\n          resizeMode: \"contain\",\n          style: {\n            width: '90%',\n            height: null,\n            aspectRatio: 1,\n            borderRadius: 10\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 934,\n          columnNumber: 18\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 916,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 911,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 561,\n    columnNumber: 5\n  }, this);\n};\nconst styles = StyleSheet.create({\n  modalContainer: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    backgroundColor: \"#e2e8f1\"\n  },\n  modalImageContainer: {\n    width: '100%',\n    alignItems: 'center',\n    justifyContent: 'center',\n    height: '70%'\n  },\n  modalImage: {\n    width: '90%',\n    height: '90%'\n  },\n  modalContent: {\n    backgroundColor: \"#fff\",\n    width: 300,\n    padding: 20,\n    borderRadius: 10\n  },\n  modalHeaderText: {\n    fontWeight: \"bold\",\n    marginBottom: 10,\n    textAlign: \"center\"\n  },\n  modalText: {\n    marginBottom: 20\n  },\n  modalButtonContainer: {\n    flexDirection: \"row\",\n    justifyContent: \"flex-end\",\n    marginTop: 20\n  },\n  modalButton: {\n    fontWeight: \"bold\",\n    marginHorizontal: 10,\n    color: \"#0091FF\"\n  },\n  friendRow: {\n    paddingVertical: 10\n  },\n  friendItem: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\"\n  },\n  friendInfo: {\n    flexDirection: \"row\",\n    alignItems: \"center\"\n  },\n  friendAvatar: {\n    width: 50,\n    height: 50,\n    borderRadius: 25,\n    marginRight: 10\n  },\n  friendName: {\n    fontSize: 16\n  },\n  friendActions: {\n    flexDirection: \"row\"\n  },\n  actionIcon: {\n    marginRight: 20\n  },\n  friendList: {\n    backgroundColor: \"white\",\n    padding: 10,\n    borderTopColor: \"#e5e5e5\",\n    borderTopWidth: 0.5\n  },\n  friendListHeader: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\"\n  },\n  pressCol: {\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  modalButtonContainer1: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: 'center',\n    marginTop: 20\n  },\n  styleSender: {\n    marginTop: 10,\n    justifyContent: 'space-around',\n    borderRadius: 10,\n    backgroundColor: \"#cff0fe\",\n    alignItems: \"flex-end\",\n    alignSelf: \"flex-end\",\n    paddingTop: 5,\n    marginLeft: 30,\n    marginRight: 10\n  },\n  styleRecive: {\n    marginTop: 10,\n    backgroundColor: \"white\",\n    alignItems: \"flex-start\",\n    alignSelf: \"flex-start\",\n    justifyContent: 'space-around',\n    borderRadius: 10,\n    paddingTop: 5,\n    marginRight: 50\n  }\n});\nexport default Message;","map":{"version":3,"names":["React","useEffect","useState","useRef","View","Text","TouchableOpacity","TextInput","Pressable","StyleSheet","ScrollView","ActivityIndicator","Modal","Image","Linking","Video","Ionicons","axiosInstance","useMessage","ImagePicker","FontAwesome5","useSocketContext","useGroup","useAuthContext","DocumentPicker","useConversation","useSelector","useDispatch","setIsGroup","avatarGroup","jsxDEV","_jsxDEV","Message","navigation","route","chatItem","params","conver","setConver","getGroups","getUserById","authUser","textMessage","setTextMessage","isColorSend","setIsColorSend","isNewSocket","newSocketData","setNewSocketData","getConversationByID","dispatch","isGroupRedux","state","isGroup","modalImage","setModalImage","chats","setChats","scrollViewRef","contentHeight","setContentHeight","scrollViewHeight","setScrollViewHeight","isLoad","setIsLoad","isLoading","setIsLoading","renderMessageContent","renderMessageContentReply","showToastSuccess","showToastError","handleGetTimeInMessage","addMessage","sendMessage","isModalVisible","setModalVisible","messageSelected","setMessageSelected","isModalFriendVisible","setIsModalFriendVisible","friends","setFriends","isLoadMess","setIsLoadMess","isLoadChuyenTiep","setIsLoadChuyenTiep","isLoadThuHoi","setIsLoadThuHoi","isLoadXoa","setIsLoadXoa","replyChat","setReplyChat","avatarGr","setOptions","headerRight","style","flexDirection","children","onPress","console","log","name","size","color","padding","paddingStart","fileName","_jsxFileName","lineNumber","columnNumber","marginRight","navigate","item","headerTitle","alignItems","width","tag","source","avatar","uri","height","borderRadius","fontSize","fontWeight","headerStyle","backgroundColor","shadowColor","headerTintColor","headerTitleStyle","toggleModal","toggleModalFriend","fetchConversation","conversation","fetchConver","_id","_objectSpread","participants","messages","scrollToEnd","fetchChats","chatNew","Promise","all","map","message","senderName","nameReply","find","participant","senderId","getUser","user","replyMessageId","chat","sender","profile","fetchFriends","error","data","response","get","newFriend","friend","userId","url","push","allGr","newGroup","group","groupName","current","animated","fetchSocket","retrunMessage","conversationId","receiverId","setChat","isDeleted","removeMembers","includes","id","preConver","handlePressIn","removeItemById","array","idToRemove","indexToRemove","findIndex","splice","handleDeleteMess","handleDelete","handleDeleteMessByStatus","api","toast","post","status","handleGetModalFriend","chuyenTiepChat","handleSendMessage","messagae","contents","send","appendData","formData","asset","split","pop","type","mimeType","append","appendIs","dataChat","prevChats","typeSend","pickFile","file","getDocumentAsync","canceled","handleSendFile","openImagePicker","pickerResult","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","All","allowsEditing","quality","allowsMultipleSelection","selectionLimit","videoExportPreset","VideoExportPreset","Passthrough","videoMaxDuration","FormData","formDataVideo","isVideo","is","assets","handleCheckIsSend","handleCheckShow","handleReplyChat","handleXemAnh","handleXemFile","supported","canOpenURL","openURL","flex","justifyContent","ref","length","index","display","marginLeft","styles","styleSender","styleRecive","paddingHorizontal","borderLeftWidth","borderColor","content","i","paddingVertical","paddingLeft","paddingRight","paddingBottom","timestamp","textAlign","value","onChangeText","placeholder","placeholderTextColor","animationType","transparent","visible","onRequestClose","modalContainer","modalContent","modalHeaderText","modalButtonContainer1","pressCol","modalButton","margin","modalButtonContainer","friendList","friendListHeader","sectionTitle","friendRow","friendItem","friendInfo","friendAvatar","friendName","friendActions","alignContent","aspectRatio","resizeMode","useNativeControls","create","modalImageContainer","marginBottom","modalText","marginTop","marginHorizontal","actionIcon","borderTopColor","borderTopWidth","alignSelf","paddingTop"],"sources":["D:/HK2_Nam4/CNM/BTL/New_3/AppZalo_CNM/Frontend/Mobile/zalofake/src/components/ChatComponents/Message/Message.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\r\nimport {\r\n  View,\r\n  Text,\r\n  TouchableOpacity,\r\n  TextInput,\r\n  Pressable,\r\n  StyleSheet,\r\n  ScrollView, ActivityIndicator, Modal,\r\n  Image,\r\n  Linking,\r\n} from \"react-native\";\r\nimport { Video } from 'expo-av';\r\nimport { Ionicons } from \"@expo/vector-icons\";\r\nimport axiosInstance from \"../../../api/axiosInstance\";\r\nimport useMessage from '../../../hooks/useMessage'\r\nimport * as ImagePicker from \"expo-image-picker\";\r\nimport { FontAwesome5 } from \"@expo/vector-icons\";\r\nimport { useSocketContext } from \"../../../contexts/SocketContext\"\r\nimport useGroup from \"../../../hooks/useGroup\";\r\nimport { useAuthContext } from \"../../../contexts/AuthContext\";\r\nimport * as DocumentPicker from 'expo-document-picker';\r\nimport useConversation from \"../../../hooks/useConversation\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { setIsGroup } from \"../../../redux/stateCreateGroupSlice\";\r\nimport avatarGroup from '../../../../assets/avatarGroup.png'\r\n\r\nconst Message = ({ navigation, route }) => {\r\n  const { chatItem } = route.params;\r\n  const [conver, setConver] = useState(chatItem)\r\n  const { getGroups, getUserById } = useGroup()\r\n  const { authUser } = useAuthContext()\r\n  const [textMessage, setTextMessage] = useState(null)\r\n  const [isColorSend, setIsColorSend] = useState(false)\r\n  const { isNewSocket, newSocketData, setNewSocketData } = useSocketContext();\r\n  const { getConversationByID } = useConversation();\r\n  const dispatch = useDispatch();\r\n  var isGroupRedux = useSelector(state => state.isGroup.isGroup);\r\n  const [modalImage, setModalImage] = useState(false);\r\n  const [chats, setChats] = useState([]);\r\n  const scrollViewRef = useRef();\r\n  const [contentHeight, setContentHeight] = useState(0);\r\n  const [scrollViewHeight, setScrollViewHeight] = useState(0);\r\n  const [isLoad, setIsLoad] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const { renderMessageContent, renderMessageContentReply, showToastSuccess, showToastError, handleGetTimeInMessage, addMessage, sendMessage } = useMessage();\r\n  const [isModalVisible, setModalVisible] = useState(false);\r\n  const [messageSelected, setMessageSelected] = useState(\"\");\r\n  const [isModalFriendVisible, setIsModalFriendVisible] = useState(false);\r\n  const [friends, setFriends] = useState([]);\r\n  const [isLoadMess, setIsLoadMess] = useState(false)\r\n  const [isLoadChuyenTiep, setIsLoadChuyenTiep] = useState(false)\r\n  const [isLoadThuHoi, setIsLoadThuHoi] = useState(false)\r\n  const [isLoadXoa, setIsLoadXoa] = useState(false)\r\n  const [replyChat, setReplyChat] = useState(null);\r\n  const [avatarGr] = useState(avatarGroup)\r\n\r\n  useEffect(() => {\r\n    navigation.setOptions({\r\n      headerRight: () => (\r\n        <View style={{ flexDirection: \"row\" }}>\r\n          <Pressable onPress={() => console.log(\"Pressed call\")}>\r\n            <Ionicons\r\n              name=\"call-outline\"\r\n              size={27}\r\n              color=\"white\"\r\n              style={{ padding: 4, paddingStart: 10 }}\r\n            />\r\n          </Pressable>\r\n          <Ionicons\r\n            name=\"videocam-outline\"\r\n            size={27}\r\n            color=\"white\"\r\n            style={{ padding: 4, marginRight: 10 }}\r\n          />\r\n          <Pressable\r\n            onPress={() => navigation.navigate(\"MessageSettings\", { item: conver })}\r\n          >\r\n            <Ionicons\r\n              name=\"list-outline\"\r\n              size={27}\r\n              color=\"white\"\r\n              style={{ padding: 4 }}\r\n            />\r\n          </Pressable>\r\n        </View>\r\n      ),\r\n      headerTitle: () => (\r\n        <View style={{ flexDirection: \"row\", alignItems: \"center\", width: '55%', marginRight: 200 }}>\r\n          {conver.tag === 'group' && (\r\n            <View style={{ width: '30%' }}>\r\n              <Image\r\n                source={conver.avatar === \"https://res.cloudinary.com/dq3pxd9eq/image/upload/v1715763881/Zalo_Fake_App/qhncxk41jtp39iknujyz.png\" ? avatarGr : { uri: conver.avatar }}\r\n                style={{ width: 45, height: 40, borderRadius: 25 }}\r\n              />\r\n            </View>\r\n          )}\r\n          <Text style={{ fontSize: 19, color: \"white\", fontWeight: 'bold' }}>{conver.name}</Text>\r\n        </View>\r\n      ),\r\n      headerStyle: {\r\n        backgroundColor: \"#0091FF\",\r\n        shadowColor: \"#fff\",\r\n      },\r\n      headerTintColor: \"#fff\",\r\n      headerTitleStyle: {\r\n        fontWeight: \"bold\",\r\n        fontSize: 20,\r\n      },\r\n    });\r\n  }, [navigation, isGroupRedux]);\r\n\r\n  const toggleModal = () => {\r\n    setModalVisible(!isModalVisible);\r\n  };\r\n  const toggleModalFriend = () => {\r\n    setIsModalFriendVisible(!isModalFriendVisible);\r\n  };\r\n\r\n  const fetchConversation = async () => {\r\n    if (chatItem.conversation !== null) {\r\n      const fetchConver = await getConversationByID(chatItem.conversation?._id)\r\n      setConver({ ...conver, participants: fetchConver.participants, messages: fetchConver.messages })\r\n    }\r\n  }\r\n  useEffect(() => {\r\n    fetchConversation()\r\n  }, [isGroupRedux])\r\n\r\n  useEffect(() => {\r\n    if (isLoad === true) {\r\n      scrollToEnd();\r\n    }\r\n  }, [isLoad]);\r\n\r\n  useEffect(() => {\r\n    if (conver && conver.messages) {\r\n      fetchChats();\r\n    }\r\n  }, [conver]);\r\n\r\n  const fetchChats = async () => {\r\n    try {\r\n      if (conver && conver.messages) {\r\n        const chatNew = await Promise.all(conver.messages.map(async (message) => {\r\n          let senderName\r\n          let nameReply\r\n          if (conver.participants.find((participant) => participant._id === message.senderId)) {\r\n            senderName = conver.participants.find((participant) => participant._id === message.senderId)\r\n          } else {\r\n            const getUser = await getUserById(message.senderId)\r\n            senderName = getUser.user\r\n          }\r\n          if (message.replyMessageId !== null) {\r\n            if (conver.participants.find((participant) => participant._id === message.replyMessageId.senderId)) {\r\n              nameReply = conver.participants.find((participant) => participant._id === message.replyMessageId.senderId)\r\n            } else {\r\n              const getUser = await getUserById(message.replyMessageId.senderId)\r\n              nameReply = getUser.user\r\n            }\r\n          }\r\n          return {\r\n            chat: message,\r\n            sender: senderName,\r\n            nameReply: nameReply?.profile.name || null\r\n          }\r\n        }))\r\n        setChats(chatNew);\r\n        setIsLoad(true);\r\n        fetchFriends();\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const fetchFriends = async () => {\r\n    let data = []\r\n    try {\r\n      const response = await axiosInstance.get('/users/get/friends');\r\n      const newFriend = await Promise.all(response.data.friends.map(async (friend) => {\r\n        return {\r\n          _id: friend.userId,\r\n          name: friend.profile.name,\r\n          avatar: friend.profile.avatar.url || \"https://fptshop.com.vn/Uploads/Originals/2021/6/23/637600835869525914_thumb_750x500.png\",\r\n          tag: 'friend'\r\n        }\r\n      }))\r\n      data.push(...newFriend)\r\n    } catch (error) {\r\n      console.log(\"FetchGroupError: \", error);\r\n    }\r\n    try {\r\n      const allGr = await getGroups();\r\n      const newGroup = await Promise.all(allGr.map(async (group) => {\r\n        return {\r\n          _id: group._id,\r\n          name: group.groupName,\r\n          avatar: group.avatar.url,\r\n          tag: group.conversation.tag\r\n        }\r\n      }))\r\n      data.push(...newGroup)\r\n    } catch (error) {\r\n      console.log(\"FetchGroupError: \", error);\r\n    }\r\n    setFriends(data)\r\n\r\n  };\r\n  const scrollToEnd = () => {\r\n    if (scrollViewRef.current) {\r\n      scrollViewRef.current.scrollToEnd({ animated: true });\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    const fetchSocket = async () => {\r\n\r\n      if (isNewSocket === \"new_message\") {\r\n        const message = newSocketData;\r\n        if (message && message.retrunMessage) {\r\n          // console.log(\"socket new messagae\", message);\r\n          if (\r\n            message.conversationId === conver.conversation._id &&\r\n            message.retrunMessage.receiverId === authUser._id && message.retrunMessage.senderId !== authUser._id\r\n          ) {\r\n            setChat(message.retrunMessage)\r\n            scrollToEnd()\r\n          }\r\n        }\r\n      }\r\n      if (isNewSocket === \"delete_message\") {\r\n        console.log(\"delete\");\r\n        const { conversationId, isDeleted } = newSocketData;\r\n        console.log((\"conversationId\", conversationId));\r\n        console.log(\"isDeleted\", isDeleted);\r\n        if (isDeleted && conver && conver.conversation._id === conversationId) {\r\n          setChats([])\r\n        } else {\r\n          if (conver && conver.conversation._id === conversationId) {\r\n            fetchConversation()\r\n            console.log(\"socket delete messagae\");\r\n          }\r\n        }\r\n      }\r\n      if (isNewSocket === \"remove-from-group\") {\r\n        // console.log(\"newSocketData\",newSocketData);\r\n        const group = newSocketData\r\n        if (group && group.removeMembers) {\r\n          if (group.removeMembers.includes(authUser._id)) {\r\n            navigation.navigate(\"ChatComponent\");\r\n            setNewSocketData(null)\r\n          }\r\n        }\r\n      }\r\n      if (isNewSocket === \"delete-group\") {\r\n        // console.log(\"delete-group in message\", newSocketData);\r\n        const group = newSocketData\r\n        if (group && group.id === conver._id) {\r\n          navigation.navigate(\"ChatComponent\");\r\n          setNewSocketData(null)\r\n        }\r\n      }\r\n      if (isNewSocket === \"update-group\") {\r\n        const group = newSocketData\r\n        if (group && group.id === conver._id) {\r\n          // console.log(\"update-group\",group);\r\n          setConver(preConver => ({\r\n            ...preConver,\r\n            name: group.name,\r\n            avatar: group.avatar\r\n          }))\r\n          dispatch(setIsGroup())\r\n        }\r\n      }\r\n\r\n    }\r\n    fetchSocket()\r\n  }, [isNewSocket, newSocketData]);\r\n  // useEffect(() => {\r\n  //   // if (scrollViewRef.current && contentHeight > scrollViewHeight && !isLoad) {\r\n  //   //   const offset = contentHeight - scrollViewHeight;\r\n  //   //   setIsLoad(true)\r\n  //   //   scrollViewRef.current.scrollTo({ x: 0, y: offset, animated: true });\r\n  //   // }\r\n\r\n  // }, [contentHeight, scrollViewHeight]);\r\n\r\n\r\n  // // Khôi phục vị trí cuộn của ScrollView\r\n  // const restoreScrollPosition = () => {\r\n  //   if (scrollViewRef.current) {\r\n  //     scrollViewRef.current.measure((x, y, width, height, pageX, pageY) => {\r\n  //       scrollViewRef.current.scrollTo({ x: 0, y: height + scrollViewHeight, animated: false });\r\n\r\n  //     });\r\n  //   }\r\n  // };\r\n  // const handleScrollToTop = () => {\r\n  //   setIsLoading(true)\r\n  //   const fetchChats = async () => {\r\n  //     try {\r\n  //       // const response = await axiosInstance.get(`/chats/getHistoryMessage/${user._id}?lastTimestamp=${lastTimestamp}`);\r\n  //       const response = await axiosInstance.get(`/conversations/get/messages/${conver.conversation._id}`);\r\n  //       const reversedChats = response.data;//.reverse();\r\n\r\n  //       // if (reversedChats && reversedChats.length > 0) {\r\n  //       //   setChats(prevChats => [...reversedChats, ...prevChats]);\r\n  //       //   restoreScrollPosition();\r\n  //       //   const lastElement = reversedChats[0]\r\n  //       //   setLastTimestamp(lastElement.timestamp)\r\n  //       // }\r\n  //       setIsLoading(false)\r\n\r\n  //     } catch (error) {\r\n  //       console.log(error);\r\n  //     }\r\n  //   };\r\n  //   fetchChats();\r\n\r\n  // };\r\n  // const handleScroll = (event) => {\r\n  //   const { y } = event.nativeEvent.contentOffset;\r\n  //   if (y === 0) {\r\n  //     handleScrollToTop();\r\n  //   }\r\n  // };\r\n  const handlePressIn = (message) => {\r\n    setMessageSelected(message)\r\n    setModalVisible(true)\r\n  };\r\n\r\n  const removeItemById = (array, idToRemove) => {\r\n    const indexToRemove = array.findIndex(item => item._id === idToRemove);\r\n    if (indexToRemove !== -1) {\r\n      array.splice(indexToRemove, 1);\r\n    }\r\n    return array;\r\n  };\r\n  const handleDeleteMess = () => {\r\n    setIsLoadThuHoi(true)\r\n    handleDelete(`/chats/${messageSelected.chat._id}/delete`, \"Thu hồi thành công\")\r\n  };\r\n  const handleDeleteMessByStatus = () => {\r\n    setIsLoadXoa(true)\r\n    handleDelete(`conversations/deleteOnMySelf/${conver.conversation._id}/${messageSelected.chat._id}`, \"Xóa thành công\")\r\n  };\r\n\r\n  const handleDelete = async (api, toast) => {\r\n    try {\r\n      const response = await axiosInstance.post(api)\r\n      if (response.status === 200) {\r\n        fetchConversation()\r\n        showToastSuccess(toast)\r\n        setIsLoadXoa(false)\r\n        setIsLoadThuHoi(false)\r\n        toggleModal()\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n      setIsLoadThuHoi(false)\r\n      setIsLoadThuHoi(false)\r\n      toggleModal()\r\n    }\r\n  }\r\n  const handleGetModalFriend = () => {\r\n    toggleModal();\r\n    toggleModalFriend();\r\n  };\r\n\r\n  const chuyenTiepChat = (friend) => {\r\n    setIsLoadChuyenTiep(true)\r\n    const handleSendMessage = async () => {\r\n      try {\r\n        const messagae = {\r\n          data: messageSelected.chat.contents[0],\r\n          replyMessageId: replyChat !== null ? replyChat.chat._id : null,\r\n          isGroup: friend.tag === \"group\" ? true : false\r\n        }\r\n        const send = await sendMessage(friend._id, messagae, 'sendText')\r\n        if (send) {\r\n          showToastSuccess(\"Chuyển tiếp thành công\")\r\n          setIsLoadChuyenTiep(false)\r\n        } else {\r\n          showToastError(\"Chuyển tiếp thất bại\")\r\n        }\r\n      } catch (error) {\r\n        console.log(\"error1:\", error)\r\n        setIsLoadChuyenTiep(false)\r\n        return false;\r\n      }\r\n      toggleModalFriend();\r\n    }\r\n    handleSendMessage();\r\n  };\r\n\r\n  const appendData = (formData, asset) => {\r\n    const fileName = asset.uri.split('/').pop();\r\n    let type = null\r\n    if (asset?.type === 'image') { type = 'image/jpeg' }\r\n    else if (asset?.type === 'video') { type = 'video/mp4' }\r\n    else if (asset?.mimeType === 'application/pdf') { type = 'file/pdf' }\r\n    formData.append('data[]', {\r\n      uri: asset.uri,\r\n      name: fileName,\r\n      type: type,\r\n    })\r\n  }\r\n  const appendIs = (formData, tag) => {\r\n    formData.append('isGroup', tag === 'group' ? true : false)\r\n    formData.append('replyMessageId', replyChat !== null ? replyChat.chat._id : null)\r\n  }\r\n  const setChat = async (dataChat) => {\r\n    let nameReply = null\r\n    let senderName = authUser\r\n    if (dataChat.replyMessageId) {\r\n      nameReply = conver.participants.find((participant) => participant._id === dataChat.replyMessageId.senderId)\r\n      if (!nameReply) {\r\n        const getUser = await getUserById(dataChat.replyMessageId.senderId)\r\n        nameReply = getUser.user\r\n      }\r\n    }\r\n    if (dataChat.senderId !== authUser._id) {\r\n      senderName = conver.participants.find(sender => sender._id === dataChat.senderId)\r\n    }\r\n    setChats(prevChats => [\r\n      ...prevChats,\r\n      {\r\n        chat: dataChat,\r\n        sender: senderName,\r\n        nameReply: nameReply?.profile?.name\r\n      }\r\n    ]);\r\n  }\r\n  const send = async (user, formData, typeSend) => {\r\n    setIsLoadMess(true)\r\n    try {\r\n      const response = await sendMessage(user, formData, typeSend)\r\n      if (response && response.status === 201) {\r\n        console.log(`${typeSend} success`);\r\n        setChat(response.data.data.message)\r\n        setReplyChat(null);\r\n        setIsLoadMess(false)\r\n        dispatch(setIsGroup())\r\n        scrollToEnd();\r\n      } else {\r\n        console.log(`${typeSend} fail`);\r\n        setIsLoadMess(false)\r\n      }\r\n    } catch (error) {\r\n      console.log(`Send ${typeSend} error:`, error);\r\n      setIsLoadMess(false)\r\n    }\r\n  }\r\n  const pickFile = async () => {\r\n    try {\r\n      const file = await DocumentPicker.getDocumentAsync();\r\n      if (file.canceled === false) {\r\n        handleSendFile(file, 'sendFiles')\r\n      }\r\n    } catch (error) {\r\n      console.error('Error picking file:', error);\r\n    }\r\n  };\r\n  const openImagePicker = async () => {\r\n    const pickerResult = await ImagePicker.launchImageLibraryAsync({\r\n      mediaTypes: ImagePicker.MediaTypeOptions.All,\r\n      allowsEditing: false,\r\n      quality: 1,\r\n      allowsMultipleSelection: true,\r\n      selectionLimit: 20,\r\n      videoExportPreset: ImagePicker.VideoExportPreset.Passthrough,\r\n      videoMaxDuration: 10\r\n    });\r\n\r\n    if (!pickerResult.canceled) {\r\n      handleSendFile(pickerResult, 'sendImages')\r\n    }\r\n  }\r\n  const handleSendFile = async (file, typeSend) => {\r\n    const formData = new FormData()\r\n    const formDataVideo = new FormData()\r\n    let isVideo = false\r\n    let is = false\r\n    for (const asset of file.assets) {\r\n      if (asset.type === 'video') {\r\n        appendData(formDataVideo, asset)\r\n        isVideo = true\r\n      }\r\n      else {\r\n        appendData(formData, asset)\r\n        is = true\r\n      }\r\n    }\r\n    if (is) {\r\n      appendIs(formData, conver.tag)\r\n      send(conver._id, formData, typeSend)\r\n    }\r\n    if (isVideo) {\r\n      appendIs(formDataVideo, conver.tag)\r\n      send(conver._id, formDataVideo, 'sendVideo')\r\n    }\r\n  }\r\n  useEffect(() => {\r\n    // Update send button color based on textMessage\r\n    if (!textMessage) {\r\n      setIsColorSend(\"black\");\r\n    } else {\r\n      setIsColorSend(\"#0091FF\");\r\n    }\r\n  }, [textMessage]);\r\n\r\n  const handleSendMessage = async () => {\r\n    if (textMessage) {\r\n      send(conver._id, addMessage(textMessage, conver.tag, replyChat), 'sendText')\r\n      setTextMessage(null);\r\n    }\r\n  }\r\n  const handleCheckIsSend = (message) => {\r\n    if (authUser.profile.name === message.sender.profile.name) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const handleCheckShow = (message) => {\r\n    if (message.sender._id === authUser._id) {\r\n      if (message.chat.status === 0 || message.chat.status === 2) {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    } else {\r\n      if (message.chat.status === 0 || message.chat.status === 1) {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    }\r\n  };\r\n  const handleReplyChat = () => {\r\n    setReplyChat(messageSelected);\r\n    toggleModal();\r\n  };\r\n  const handleXemAnh = () => {\r\n    setModalImage(true)\r\n  };\r\n  const handleXemFile = async () => {\r\n    const url = messageSelected?.chat?.contents[0].data;\r\n    const supported = await Linking.canOpenURL(url);\r\n    if (supported) {\r\n      await Linking.openURL(url);\r\n    } else {\r\n      console.error(\"Don't know how to open URI: \" + url);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <View style={{ flex: 1, backgroundColor: \"#E5E9EB\" }}>\r\n      <View style={{ flex: 1, justifyContent: \"center\" }}>\r\n        {isLoading ? (\r\n          <ActivityIndicator color=\"blue\" size=\"large\" />\r\n        ) : (\r\n          <View></View>\r\n        )}\r\n        <ScrollView ref={scrollViewRef}\r\n        >\r\n          <View style={{ flex: 1 }}>\r\n            {chats.length > 0 ?\r\n              (chats.map((message, index) => (\r\n                <View key={index}>\r\n                  {\r\n                    handleCheckShow(message) && (\r\n                      <View style={{ display: 'flex', flexDirection: 'row', alignItems: \"center\", justifyContent: handleCheckIsSend(message) ? \"flex-end\" : \"flex-start\" }} >\r\n                        {handleCheckIsSend(message) ?\r\n                          (<View></View>) :\r\n                          (<View\r\n                            style={{ width: 35, height: 35, justifyContent: \"center\", alignItems: \"center\", marginLeft: 10, marginRight: 10 }} >\r\n                            <Image\r\n                              source={{ uri: message.sender.profile.avatar.url || \"https://fptshop.com.vn/Uploads/Originals/2021/6/23/637600835869525914_thumb_750x500.png\" }}\r\n                              style={{ width: 35, height: 35, borderRadius: 25 }}\r\n                            />\r\n                          </View>)}\r\n                        <View style={[\r\n                          handleCheckIsSend(message) ? styles.styleSender : styles.styleRecive\r\n                        ]}>\r\n                          <Text style={{ paddingHorizontal: 10, fontSize: 12, color: 'gray', fontWeight: '700' }}>\r\n                            {message.sender.profile.name}\r\n                          </Text>\r\n                          {message.chat.replyMessageId === null ? (<View></View>) :\r\n                            (<View style={{ backgroundColor: '#89D5FB', display: 'flex', marginLeft: 10, borderLeftWidth: 2, borderColor: '#0072AB', marginRight: 10 }}>\r\n\r\n                              {message.chat.replyMessageId.contents.map((content, i) => (\r\n                                <View key={i} style={{ display: 'flex', paddingVertical: 10, alignItems: 'center', }}>\r\n                                  {content.type === 'text' ? (\r\n                                    <View>\r\n                                      <Text style={{ fontSize: 13, fontWeight: 'bold', paddingLeft: 15 }}>\r\n                                        {message?.nameReply}\r\n                                      </Text>\r\n                                      {renderMessageContentReply(content)}\r\n                                    </View>\r\n                                  ) : (\r\n                                    <View style={{ display: 'flex', paddingVertical: 5, alignItems: 'center', paddingRight: 5, flexDirection: 'row' }}>\r\n                                      {renderMessageContentReply(content)}\r\n                                      <View>\r\n                                        <Text style={{ paddingLeft: 10, fontSize: 13, fontWeight: 'bold' }}>\r\n                                          {message?.nameReply}\r\n                                        </Text>\r\n                                        <Text style={{ paddingLeft: 10, fontSize: 13, color: '#000' }}>\r\n                                          [{content.type === 'image' ? 'Hình ảnh' : content.type}]\r\n                                        </Text>\r\n                                      </View>\r\n                                    </View>\r\n                                  )}\r\n                                </View>\r\n                              ))}\r\n                            </View>)\r\n                          }\r\n                          {message.chat.contents.map((content, i) => (\r\n                            <Pressable key={i}\r\n                              onPress={() => handlePressIn(message)}>\r\n                              <View>\r\n                                {renderMessageContent(content)}\r\n                                <View style={{ paddingLeft: 15, paddingRight: 15, paddingBottom: 5 }}><Text style={{ fontSize: 14 }}>{handleGetTimeInMessage(message.chat.timestamp)}</Text></View>\r\n                              </View>\r\n                            </Pressable>\r\n                          ))}\r\n                        </View>\r\n                      </View>\r\n                    )\r\n                  }\r\n                </View>\r\n              ))) : (<View><Text style={{ fontSize: 16, fontWeight: '600', textAlign: 'center', paddingVertical: 10 }}>Chưa có tin nhắn nào!</Text></View>)}\r\n\r\n          </View>\r\n        </ScrollView>\r\n      </View >\r\n      <View>\r\n        {replyChat === null ?\r\n          (<Text></Text>) :\r\n          (\r\n            <View style={{ backgroundColor: 'white', padding: 10 }}>\r\n              <View style={{ borderLeftWidth: 2, marginLeft: 10 }}>\r\n                <View style={{ display: 'flex', flexDirection: 'row', justifyContent: 'space-between' }}>\r\n                  <Text style={{ paddingLeft: 15, fontSize: 14, color: '#000' }}>\r\n                    Trả lời: <Text style={{ paddingLeft: 15, fontSize: 14, color: 'gray', fontWeight: 'bold' }}>{replyChat?.sender?.profile.name} </Text>\r\n                  </Text>\r\n                  <Pressable onPress={() => { setReplyChat(null) }} style={{ marginRight: 20 }}><Ionicons name=\"close\" size={30} color=\"gray\" /></Pressable>\r\n                </View>\r\n                <View>\r\n                  {replyChat.chat.contents.map((content, i) => (\r\n                    <View key={i} >\r\n                      {renderMessageContentReply(content)}\r\n                    </View>\r\n                  ))}</View>\r\n              </View>\r\n            </View>\r\n          )}\r\n      </View>\r\n      <View\r\n        style={{\r\n          flexDirection: \"row\",\r\n          justifyContent: \"space-around\",\r\n          alignItems: \"center\",\r\n          padding: 10,\r\n          backgroundColor: \"white\",\r\n        }}\r\n      >\r\n        <Pressable onPress={() => console.log(\"Pressed smiley\")}>\r\n          <Ionicons name=\"happy-outline\" size={30} color=\"black\" />\r\n        </Pressable>\r\n\r\n        <View style={{ width: '54%' }}>\r\n          <TextInput\r\n            value={textMessage}\r\n            onChangeText={setTextMessage}\r\n            style={{\r\n              flex: 1,\r\n              height: 40,\r\n              borderColor: \"gray\",\r\n              borderRadius: 5,\r\n              fontSize: 17\r\n            }}\r\n            placeholder=\"Tin nhắn\"\r\n            placeholderTextColor=\"gray\"\r\n          />\r\n        </View>\r\n\r\n        <View style={{ flexDirection: 'row', width: '35%', justifyContent: 'space-between' }}>\r\n          <TouchableOpacity onPress={pickFile}>\r\n            <Ionicons\r\n              name=\"ellipsis-horizontal-outline\"\r\n              size={30}\r\n              color=\"black\"\r\n            />\r\n          </TouchableOpacity>\r\n\r\n          <TouchableOpacity onPress={() => console.log(\"Pressed microphone\")}>\r\n            <Ionicons\r\n              name=\"mic-outline\"\r\n              size={30}\r\n              color=\"black\"\r\n            />\r\n          </TouchableOpacity>\r\n\r\n          <TouchableOpacity onPress={openImagePicker}>\r\n            <Ionicons name=\"image-outline\" size={30} color=\"black\" />\r\n          </TouchableOpacity>\r\n\r\n          <TouchableOpacity onPress={handleSendMessage}>\r\n            {isLoadMess ? (\r\n              <ActivityIndicator color=\"black\" size=\"large\" />\r\n            ) : (\r\n              <Ionicons name=\"paper-plane\" size={30} color={isColorSend} />\r\n            )}\r\n          </TouchableOpacity>\r\n        </View>\r\n      </View>\r\n      {/* modal lựa chọn */}\r\n      <Modal\r\n        animationType=\"slide\"\r\n        transparent={true}\r\n        visible={isModalVisible}\r\n        onRequestClose={toggleModal}\r\n      >\r\n        <View style={styles.modalContainer}>\r\n          <View style={styles.modalContent}>\r\n            <Text style={styles.modalHeaderText}>\r\n              Choose\r\n            </Text>\r\n            <View style={styles.modalButtonContainer1}>\r\n              <Pressable style={styles.pressCol} onPress={handleGetModalFriend}>\r\n                <FontAwesome5\r\n                  name=\"share\"\r\n                  size={20}\r\n                  color=\"black\"\r\n                  style={{ marginRight: 8 }}\r\n                />\r\n                <Text style={styles.modalButton}>Chuyển tiếp</Text>\r\n              </Pressable>\r\n              <Pressable style={styles.pressCol} onPress={handleDeleteMessByStatus}>\r\n                {isLoadXoa ? (\r\n                  <ActivityIndicator color=\"black\" size=\"large\" />\r\n                ) : (\r\n                  <FontAwesome5\r\n                    name=\"trash\"\r\n                    size={20}\r\n                    color=\"black\"\r\n                    style={{ marginRight: 8 }}\r\n                  />\r\n                )}\r\n                <Text style={styles.modalButton} >Xóa</Text>\r\n              </Pressable>\r\n              {\r\n                messageSelected?.sender?.profile?.name === authUser.profile.name\r\n                  ? (\r\n                    <Pressable style={styles.pressCol} onPress={handleDeleteMess}>\r\n                      {isLoadThuHoi ? (\r\n                        <ActivityIndicator color=\"black\" size=\"large\" />\r\n                      ) : (\r\n                        <FontAwesome5\r\n                          name=\"comment-slash\"\r\n                          size={20}\r\n                          color=\"black\"\r\n                          style={{ marginRight: 8 }}\r\n                        />\r\n                      )}\r\n                      <Text style={styles.modalButton}>Thu hồi</Text>\r\n                    </Pressable>\r\n\r\n                  ) : (\r\n                    <Text></Text>\r\n                  )}\r\n            </View>\r\n            <View style={styles.modalButtonContainer1}>\r\n              <Pressable style={styles.pressCol} >\r\n                <FontAwesome5\r\n                  name=\"list\"\r\n                  size={20}\r\n                  color=\"black\"\r\n                  style={{ margin: 'auto' }}\r\n                />\r\n                <Text style={styles.modalButton}>Chọn nhiều</Text>\r\n              </Pressable>\r\n              <Pressable style={styles.pressCol} onPress={handleReplyChat}>\r\n                <FontAwesome5\r\n                  name=\"reply\"\r\n                  size={20}\r\n                  color=\"black\"\r\n                  style={{ margin: 'auto' }}\r\n                />\r\n                <Text style={styles.modalButton}>Trả lời</Text>\r\n              </Pressable>\r\n              {\r\n                messageSelected?.chat?.contents[0].type === 'image'\r\n                && (\r\n                  <Pressable style={styles.pressCol} onPress={handleXemAnh}>\r\n                    <FontAwesome5\r\n                      name=\"image\"\r\n                      size={25}\r\n                      color=\"black\"\r\n                      style={{ margin: 'auto' }}\r\n                    />\r\n                    <Text style={styles.modalButton}>Xem ảnh</Text>\r\n                  </Pressable>\r\n                )}\r\n              {\r\n                messageSelected?.chat?.contents[0].type === 'video'\r\n                && (\r\n                  <Pressable style={styles.pressCol} onPress={handleXemAnh}>\r\n                    <FontAwesome5\r\n                      name=\"video\"\r\n                      size={25}\r\n                      color=\"black\"\r\n                      style={{ margin: 'auto' }}\r\n                    />\r\n                    <Text style={styles.modalButton}>Xem video</Text>\r\n                  </Pressable>\r\n                )}\r\n              {\r\n                messageSelected?.chat?.contents[0].type === 'file'\r\n                && (\r\n                  <Pressable style={styles.pressCol} onPress={handleXemFile}>\r\n                    <FontAwesome5\r\n                      name=\"list\"\r\n                      size={25}\r\n                      color=\"black\"\r\n                      style={{ margin: 'auto' }}\r\n                    />\r\n                    <Text style={styles.modalButton}>Xem file</Text>\r\n                  </Pressable>\r\n                )}\r\n            </View>\r\n\r\n            <View style={styles.modalButtonContainer}>\r\n              <Pressable onPress={toggleModal}>\r\n                <Text style={styles.modalButton}>HỦY</Text>\r\n              </Pressable>\r\n\r\n            </View>\r\n          </View>\r\n        </View>\r\n      </Modal>\r\n      {/* modal load danh sách bạn bè để chuyển tiếp */}\r\n      <Modal\r\n        animationType=\"slide\"\r\n        transparent={true}\r\n        visible={isModalFriendVisible}\r\n        onRequestClose={toggleModalFriend}\r\n      >\r\n        <View style={styles.modalContainer}>\r\n          <View style={styles.modalContent}>\r\n            <Text style={styles.modalHeaderText}>\r\n              Choose\r\n            </Text>\r\n            <View style={styles.modalButtonContainer}>\r\n              <ScrollView>\r\n                <View style={styles.friendList}>\r\n                  <View style={styles.friendListHeader}>\r\n                    <Text style={styles.sectionTitle}></Text>\r\n                    {isLoadChuyenTiep ? (\r\n                      <ActivityIndicator color=\"black\" size=\"large\" />\r\n                    ) : (\r\n                      <View></View>\r\n                    )}\r\n                    <Pressable onPress={(toggleModalFriend)}><Ionicons name=\"close\" size={30} color=\"black\" /></Pressable>\r\n                  </View>\r\n                  {friends.map((friend, index) => (\r\n                    <View key={index} style={styles.friendRow}>\r\n                      <Pressable style={styles.friendItem} >\r\n                        <View style={styles.friendInfo}>\r\n                          <Image\r\n                            source={{\r\n                              uri: friend.avatar\r\n                            }}\r\n                            style={styles.friendAvatar}\r\n                          />\r\n                          <Text style={styles.friendName}>{friend.name}</Text>\r\n                        </View>\r\n                        <View style={styles.friendActions}>\r\n                          <Pressable onPress={() => chuyenTiepChat(friend)} style={styles.pressCol}>\r\n                            <FontAwesome5\r\n                              name=\"arrow-right\"\r\n                              size={30}\r\n                              color=\"black\"\r\n                              style={{ alignContent: \"center\", alignItems: \"center\" }}\r\n                            />\r\n                          </Pressable>\r\n                        </View>\r\n                      </Pressable>\r\n                    </View>\r\n                  ))}\r\n                </View>\r\n              </ScrollView>\r\n            </View>\r\n            <View style={styles.modalButtonContainer}>\r\n              <Pressable onPress={toggleModalFriend}>\r\n                <Text style={styles.modalButton}>HỦY</Text>\r\n              </Pressable>\r\n              <Pressable >\r\n                <Text style={styles.modalButton}>XÁC NHẬN</Text>\r\n              </Pressable>\r\n            </View>\r\n          </View>\r\n        </View>\r\n      </Modal>\r\n\r\n      {/* modalImage */}\r\n      <Modal\r\n        visible={modalImage}\r\n        transparent={true}\r\n        onRequestClose={() => setModalImage(false)}\r\n      >\r\n        <View style={styles.modalContainer}>\r\n          <TouchableOpacity style={{ paddingLeft: '80%' }} onPress={() => {\r\n            setModalImage(false);\r\n            toggleModal()\r\n          }}>\r\n            <View>\r\n              <FontAwesome5\r\n                name=\"times\"\r\n                size={30}\r\n                color=\"black\"\r\n                style={{ alignContent: \"center\", alignItems: \"center\" }}\r\n              />\r\n            </View>\r\n          </TouchableOpacity>\r\n          {messageSelected?.chat?.contents[0].type === 'image' ? (<Image\r\n            source={{ uri: messageSelected?.chat?.contents[0].data }}\r\n            style={{ width: '90%', height: null, aspectRatio: 1, borderRadius: 10 }}\r\n            resizeMode=\"contain\"\r\n          />) : (<Video\r\n            source={{ uri: messageSelected?.chat?.contents[0].data }}\r\n            useNativeControls\r\n            resizeMode=\"contain\"\r\n            style={{ width: '90%', height: null, aspectRatio: 1, borderRadius: 10 }}\r\n          />)\r\n          }\r\n        </View>\r\n      </Modal>\r\n    </View >\r\n  );\r\n};\r\nconst styles = StyleSheet.create({\r\n  modalContainer: {\r\n    flex: 1,\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    backgroundColor: \"#e2e8f1\",\r\n  },\r\n  modalImageContainer: {\r\n    width: '100%',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    height: '70%'\r\n  },\r\n  modalImage: {\r\n    width: '90%',\r\n    height: '90%',\r\n  },\r\n  modalContent: {\r\n    backgroundColor: \"#fff\",\r\n    width: 300,\r\n    padding: 20,\r\n    borderRadius: 10,\r\n  },\r\n  modalHeaderText: {\r\n    fontWeight: \"bold\",\r\n    marginBottom: 10,\r\n    textAlign: \"center\",\r\n  },\r\n  modalText: {\r\n    marginBottom: 20,\r\n  },\r\n  modalButtonContainer: {\r\n    flexDirection: \"row\",\r\n    justifyContent: \"flex-end\",\r\n    marginTop: 20\r\n  },\r\n  modalButton: {\r\n    fontWeight: \"bold\",\r\n    marginHorizontal: 10,\r\n    color: \"#0091FF\",\r\n  },\r\n  friendRow: {\r\n    paddingVertical: 10,\r\n  },\r\n  friendItem: {\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-between\",\r\n  },\r\n  friendInfo: {\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n  },\r\n  friendAvatar: {\r\n    width: 50,\r\n    height: 50,\r\n    borderRadius: 25,\r\n    marginRight: 10,\r\n  },\r\n  friendName: {\r\n    fontSize: 16,\r\n  },\r\n  friendActions: {\r\n    flexDirection: \"row\",\r\n  },\r\n  actionIcon: {\r\n    marginRight: 20,\r\n  },\r\n  friendList: {\r\n    backgroundColor: \"white\",\r\n    padding: 10,\r\n    borderTopColor: \"#e5e5e5\",\r\n    borderTopWidth: 0.5,\r\n  },\r\n  friendListHeader: {\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-between\",\r\n  },\r\n  pressCol: {\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n  },\r\n  modalButtonContainer1: {\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: 'center',\r\n    marginTop: 20\r\n  },\r\n  styleSender: {\r\n    marginTop: 10,\r\n    justifyContent: 'space-around',\r\n    borderRadius: 10,\r\n    backgroundColor: \"#cff0fe\",\r\n    alignItems: \"flex-end\",\r\n    alignSelf: \"flex-end\",\r\n    paddingTop: 5,\r\n    marginLeft: 30,\r\n    marginRight: 10\r\n  },\r\n  styleRecive: {\r\n    marginTop: 10,\r\n    backgroundColor: \"white\",\r\n    alignItems: \"flex-start\",\r\n    alignSelf: \"flex-start\",\r\n    justifyContent: 'space-around',\r\n    borderRadius: 10,\r\n    paddingTop: 5,\r\n    marginRight: 50\r\n  },\r\n\r\n});\r\nexport default Message;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}