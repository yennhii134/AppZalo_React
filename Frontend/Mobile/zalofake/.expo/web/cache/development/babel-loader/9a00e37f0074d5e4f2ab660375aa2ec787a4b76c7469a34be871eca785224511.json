{"ast":null,"code":"var _jsxFileName = \"D:\\\\HK2_Nam4\\\\CNM\\\\BTL\\\\New_3\\\\AppZalo_CNM\\\\Frontend\\\\Mobile\\\\zalofake\\\\src\\\\hooks\\\\useMessage.js\";\nimport React from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { Video } from 'expo-av';\nimport Toast from \"react-native-toast-message\";\nimport moment from 'moment-timezone';\nimport axiosInstance from '../api/axiosInstance';\nimport useGroup from './useGroup';\nimport { useAuthContext } from '../contexts/AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst useMessage = () => {\n  const {\n    getUserById\n  } = useGroup();\n  const {\n    authUser\n  } = useAuthContext();\n  const showToastSuccess = notice => {\n    Toast.show({\n      text1: notice,\n      type: \"success\",\n      topOffset: 0,\n      position: \"bottom\"\n    });\n  };\n  const showToastError = notice => {\n    Toast.show({\n      text1: notice,\n      type: \"error\",\n      topOffset: 0,\n      position: \"bottom\"\n    });\n  };\n  const renderMessageContent = content => {\n    if (content.type === 'text') {\n      return _jsxDEV(View, {\n        style: {\n          paddingLeft: 15,\n          paddingRight: 15,\n          paddingTop: 5\n        },\n        children: _jsxDEV(Text, {\n          style: {\n            fontSize: 18\n          },\n          children: content.data\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 9\n      }, this);\n    } else if (content.type === 'image') {\n      return _jsxDEV(View, {\n        style: {\n          paddingLeft: 15,\n          paddingRight: 15,\n          paddingTop: 5\n        },\n        children: _jsxDEV(Image, {\n          source: {\n            uri: content.data\n          },\n          style: {\n            width: 150,\n            height: 150,\n            borderRadius: 10\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 9\n      }, this);\n    } else if (content.type === 'video') {\n      return _jsxDEV(View, {\n        style: {\n          paddingLeft: 15,\n          paddingRight: 15\n        },\n        children: _jsxDEV(Video, {\n          source: {\n            uri: content.data\n          },\n          useNativeControls: true,\n          resizeMode: \"contain\",\n          style: {\n            width: 200,\n            height: 200,\n            borderRadius: 10\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }, this);\n    } else if (content.type === 'file') {\n      return _jsxDEV(View, {\n        style: {\n          paddingLeft: 15,\n          paddingRight: 15\n        },\n        children: _jsxDEV(Text, {\n          style: {\n            fontSize: 14\n          },\n          children: content.data\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this);\n    } else {\n      return null;\n    }\n  };\n  const renderMessageContentReply = content => {\n    if (content.type === 'text') {\n      return _jsxDEV(View, {\n        style: {\n          paddingHorizontal: 15\n        },\n        children: _jsxDEV(Text, {\n          style: {\n            fontSize: 14\n          },\n          children: content.data\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this);\n    } else if (content.type === 'image') {\n      return _jsxDEV(View, {\n        style: {\n          paddingLeft: 10\n        },\n        children: _jsxDEV(Image, {\n          source: {\n            uri: content.data\n          },\n          style: {\n            width: 100,\n            height: 100,\n            borderRadius: 10\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this);\n    } else if (content.type === 'video') {\n      return _jsxDEV(View, {\n        style: {\n          paddingLeft: 10\n        },\n        children: _jsxDEV(Video, {\n          source: {\n            uri: content.data\n          },\n          useNativeControls: true,\n          resizeMode: \"contain\",\n          style: {\n            width: 120,\n            height: 120,\n            borderRadius: 10\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this);\n    } else if (content.type === 'file') {\n      return _jsxDEV(View, {\n        style: {\n          paddingLeft: 15,\n          paddingRight: 15\n        },\n        children: _jsxDEV(Text, {\n          style: {\n            fontSize: 14\n          },\n          children: content.data\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this);\n    } else {\n      return null;\n    }\n  };\n  const handleGetTimeInChat = time => {\n    const currentTime = moment().tz('Asia/Ho_Chi_Minh');\n    const vietnamDatetime = moment(time).tz('Asia/Ho_Chi_Minh');\n    const timeDifference = moment.duration(currentTime.diff(vietnamDatetime));\n    const days = Math.floor(timeDifference.asDays());\n    const hours = Math.abs(timeDifference.hours());\n    const minutes = Math.abs(timeDifference.minutes());\n    const seconds = Math.abs(timeDifference.seconds());\n    if (days >= 1) {\n      return `${days} ngày`;\n    } else if (hours >= 1) {\n      return `${hours} giờ`;\n    } else if (minutes >= 1) {\n      return `${minutes} phút`;\n    } else {\n      return `${seconds} giây`;\n    }\n  };\n  const handleGetTimeInMessage = time => {\n    const vietnamDatetime = moment(time).tz('Asia/Ho_Chi_Minh').format('YYYY-MM-DD HH:mm:ss');\n    const dateObject = new Date(vietnamDatetime);\n    const hours = dateObject.getHours().toString().padStart(2, '0');\n    const minutes = dateObject.getMinutes().toString().padStart(2, '0');\n    return `${hours}:${minutes}`;\n  };\n  const addMessage = (textMessage, tag, replyChat) => {\n    return {\n      data: {\n        type: 'text',\n        data: textMessage\n      },\n      replyMessageId: replyChat !== null ? replyChat.chat._id : null,\n      isGroup: tag === \"group\" ? true : false\n    };\n  };\n  const sendMessage = async (user, message, typeSend) => {\n    try {\n      let headers = {};\n      if (typeSend === 'sendImages' || typeSend === 'sendVideo' || typeSend === 'sendFiles') {\n        headers = {\n          \"Content-Type\": \"multipart/form-data\"\n        };\n      }\n      const response = await axiosInstance.post(`/chats/${user}/${typeSend}`, message, {\n        headers\n      });\n      return response;\n    } catch (error) {\n      console.log(\"Error send message:\", error);\n      return false;\n    }\n  };\n  const setDataChat = async (conver, isDelete) => {\n    let dataChat = '';\n    const getUser = await getUserById(conver.senderId);\n    if (authUser.profile.name === getUser.user.profile.name) {\n      dataChat = \"Bạn\";\n    } else {\n      dataChat = getUser.user.profile.name;\n    }\n    if (isDelete) {\n      dataChat = dataChat + \": đã thu hồi tin nhắn\";\n    } else {\n      if (conver.contents[0].type === \"text\") {\n        dataChat = dataChat + ': ' + conver.contents[0].data;\n      } else if (conver.contents[0].type === \"image\") {\n        dataChat = dataChat + ': [Hình ảnh]';\n      } else if (conver.contents[0].type === \"video\") {\n        dataChat = dataChat + ': [Video]';\n      } else {\n        dataChat = dataChat + ': [File]';\n      }\n    }\n    return dataChat;\n  };\n  const sortTime = data => {\n    data.sort((a, b) => {\n      const timeA = a?.chat?.lastMessage?.timestamp || a.lastMessage.timestamp;\n      const timeB = b?.chat?.lastMessage?.timestamp || b.lastMessage.timestamp;\n      return timeB.localeCompare(timeA);\n    });\n    return data;\n  };\n  return {\n    renderMessageContent,\n    showToastError,\n    showToastSuccess,\n    renderMessageContentReply,\n    handleGetTimeInChat,\n    handleGetTimeInMessage,\n    addMessage,\n    sendMessage,\n    setDataChat,\n    sortTime\n  };\n};\nexport default useMessage;","map":{"version":3,"names":["React","View","Text","Image","Video","Toast","moment","axiosInstance","useGroup","useAuthContext","jsxDEV","_jsxDEV","useMessage","getUserById","authUser","showToastSuccess","notice","show","text1","type","topOffset","position","showToastError","renderMessageContent","content","style","paddingLeft","paddingRight","paddingTop","children","fontSize","data","fileName","_jsxFileName","lineNumber","columnNumber","source","uri","width","height","borderRadius","useNativeControls","resizeMode","renderMessageContentReply","paddingHorizontal","handleGetTimeInChat","time","currentTime","tz","vietnamDatetime","timeDifference","duration","diff","days","Math","floor","asDays","hours","abs","minutes","seconds","handleGetTimeInMessage","format","dateObject","Date","getHours","toString","padStart","getMinutes","addMessage","textMessage","tag","replyChat","replyMessageId","chat","_id","isGroup","sendMessage","user","message","typeSend","headers","response","post","error","console","log","setDataChat","conver","isDelete","dataChat","getUser","senderId","profile","name","contents","sortTime","sort","a","b","timeA","lastMessage","timestamp","timeB","localeCompare"],"sources":["D:/HK2_Nam4/CNM/BTL/New_3/AppZalo_CNM/Frontend/Mobile/zalofake/src/hooks/useMessage.js"],"sourcesContent":["import React from 'react';\r\nimport { View, Text, Image } from 'react-native';\r\nimport { Video } from 'expo-av';\r\nimport Toast from \"react-native-toast-message\";\r\nimport moment from 'moment-timezone';\r\nimport axiosInstance from '../api/axiosInstance';\r\nimport useGroup from './useGroup';\r\nimport { useAuthContext } from '../contexts/AuthContext';\r\n\r\nconst useMessage = () => {\r\n  const { getUserById } = useGroup()\r\n  const { authUser } = useAuthContext();\r\n\r\n  const showToastSuccess = (notice) => {\r\n    Toast.show({\r\n      text1: notice,\r\n      type: \"success\",\r\n      topOffset: 0,\r\n      position: \"bottom\",\r\n    });\r\n  };\r\n  const showToastError = (notice) => {\r\n    Toast.show({\r\n      text1: notice,\r\n      type: \"error\",\r\n      topOffset: 0,\r\n      position: \"bottom\",\r\n    });\r\n  };\r\n  const renderMessageContent = (content) => {\r\n    if (content.type === 'text') {\r\n      return (\r\n        <View style={{ paddingLeft: 15, paddingRight: 15, paddingTop: 5 }}>\r\n          <Text style={{ fontSize: 18 }}>{content.data}</Text>\r\n        </View>\r\n      );\r\n    } else if (content.type === 'image') {\r\n      return (\r\n        <View style={{ paddingLeft: 15, paddingRight: 15, paddingTop: 5 }}>\r\n          <Image\r\n            source={{ uri: content.data }}\r\n            style={{ width: 150, height: 150, borderRadius: 10 }}\r\n          />\r\n        </View>\r\n      );\r\n    } else if (content.type === 'video') {\r\n      return (\r\n        <View style={{ paddingLeft: 15, paddingRight: 15 }}>\r\n          <Video\r\n            source={{ uri: content.data }}\r\n\r\n            useNativeControls\r\n            resizeMode=\"contain\"\r\n\r\n            style={{ width: 200, height: 200, borderRadius: 10 }}\r\n\r\n          />\r\n        </View>\r\n      );\r\n    } else if (content.type === 'file') {\r\n      return (\r\n\r\n        <View style={{ paddingLeft: 15, paddingRight: 15 }}>\r\n\r\n          <Text style={{ fontSize: 14 }}>{content.data}</Text>\r\n\r\n        </View>\r\n\r\n      );\r\n    } else {\r\n      return null; // Loại nội dung không được hỗ trợ\r\n    }\r\n  }\r\n  const renderMessageContentReply = (content) => {\r\n    if (content.type === 'text') {\r\n      return (\r\n        <View style={{ paddingHorizontal: 15 }}>\r\n          <Text style={{ fontSize: 14 }}>{content.data}</Text>\r\n        </View>\r\n      );\r\n    } else if (content.type === 'image') {\r\n      return (\r\n        <View style={{ paddingLeft: 10 }}>\r\n          <Image\r\n            source={{ uri: content.data }}\r\n            style={{ width: 100, height: 100, borderRadius: 10 }}\r\n          />\r\n        </View>\r\n      );\r\n    } else if (content.type === 'video') {\r\n      return (\r\n        <View style={{ paddingLeft: 10 }}>\r\n          <Video\r\n            source={{ uri: content.data }}\r\n\r\n            useNativeControls\r\n            resizeMode=\"contain\"\r\n\r\n            style={{ width: 120, height: 120, borderRadius: 10 }}\r\n\r\n          />\r\n        </View>\r\n      );\r\n    }\r\n    else if (content.type === 'file') {\r\n      return (\r\n        <View style={{ paddingLeft: 15, paddingRight: 15 }}>\r\n          <Text style={{ fontSize: 14 }}>{content.data}</Text>\r\n        </View>\r\n\r\n      );\r\n    }\r\n    else {\r\n      return null; // Loại nội dung không được hỗ trợ\r\n    }\r\n  }\r\n  const handleGetTimeInChat = (time) => {\r\n    const currentTime = moment().tz('Asia/Ho_Chi_Minh'); // Lấy thời gian hiện tại ở múi giờ Việt Nam\r\n    const vietnamDatetime = moment(time).tz('Asia/Ho_Chi_Minh'); // Chuyển đổi thời gian đã cho sang múi giờ Việt Nam\r\n    const timeDifference = moment.duration(currentTime.diff(vietnamDatetime)); // Tính khoảng cách thời gian\r\n\r\n    const days = Math.floor(timeDifference.asDays()); // Số ngày\r\n    const hours = Math.abs(timeDifference.hours()); // Số giờ (dương)\r\n    const minutes = Math.abs(timeDifference.minutes()); // Số phút (dương)\r\n    const seconds = Math.abs(timeDifference.seconds()); // Số giây (dương)\r\n\r\n    if (days >= 1) {\r\n      return `${days} ngày`;\r\n    }\r\n    else if (hours >= 1) {\r\n      return `${hours} giờ`;\r\n    }\r\n    else if (minutes >= 1) {\r\n      return `${minutes} phút`;\r\n    }\r\n    else {\r\n      return `${seconds} giây`;\r\n    }\r\n  }\r\n  const handleGetTimeInMessage = (time) => {\r\n    const vietnamDatetime = moment(time).tz('Asia/Ho_Chi_Minh').format('YYYY-MM-DD HH:mm:ss');\r\n    const dateObject = new Date(vietnamDatetime);\r\n    const hours = dateObject.getHours().toString().padStart(2, '0');\r\n    const minutes = dateObject.getMinutes().toString().padStart(2, '0'); // Sử dụng padStart để đảm bảo số phút có 2 chữ số\r\n    return `${hours}:${minutes}`;\r\n  };\r\n  const addMessage = (textMessage, tag, replyChat) => {\r\n    return {\r\n      data: {\r\n        type: 'text', data: textMessage\r\n      },\r\n      replyMessageId: replyChat !== null ? replyChat.chat._id : null,\r\n      isGroup: tag === \"group\" ? true : false\r\n    }\r\n  }\r\n  const sendMessage = async (user, message, typeSend) => {\r\n    try {\r\n      let headers = {}\r\n      if (typeSend === 'sendImages' || typeSend === 'sendVideo' || typeSend === 'sendFiles') {\r\n        headers = {\r\n          \"Content-Type\": \"multipart/form-data\",\r\n        }\r\n      }\r\n      const response = await axiosInstance.post(`/chats/${user}/${typeSend}`, message, { headers })\r\n      return response;\r\n\r\n    } catch (error) {\r\n      console.log(\"Error send message:\", error)\r\n      return false;\r\n    }\r\n  }\r\n  const setDataChat = async (conver, isDelete) => {\r\n    let dataChat = '';\r\n    const getUser = await getUserById(conver.senderId)\r\n    if (authUser.profile.name === getUser.user.profile.name) {\r\n      dataChat = \"Bạn\"\r\n    } else {\r\n      dataChat = getUser.user.profile.name\r\n    }\r\n    if (isDelete) {\r\n      dataChat = dataChat + \": đã thu hồi tin nhắn\";\r\n    }\r\n    else {\r\n      if (conver.contents[0].type === \"text\") {\r\n        dataChat = dataChat + ': ' + conver.contents[0].data;\r\n      } else if (conver.contents[0].type === \"image\") {\r\n        dataChat = dataChat + ': [Hình ảnh]';\r\n      } else if (conver.contents[0].type === \"video\"){\r\n        dataChat = dataChat + ': [Video]';\r\n      } else {\r\n        dataChat = dataChat + ': [File]';\r\n      }\r\n    }\r\n    return dataChat;\r\n  }\r\n  const sortTime = (data) => {\r\n    data.sort((a, b) => {\r\n      const timeA = a?.chat?.lastMessage?.timestamp || a.lastMessage.timestamp \r\n      const timeB = b?.chat?.lastMessage?.timestamp || b.lastMessage.timestamp \r\n      return timeB.localeCompare(timeA);\r\n    });\r\n    return data;\r\n  }\r\n  return {\r\n    renderMessageContent,\r\n    showToastError,\r\n    showToastSuccess,\r\n    renderMessageContentReply,\r\n    handleGetTimeInChat,\r\n    handleGetTimeInMessage,\r\n    addMessage,\r\n    sendMessage,\r\n    setDataChat,\r\n    sortTime\r\n  };\r\n};\r\n\r\nexport default useMessage;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}